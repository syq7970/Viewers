)]}'
{"version":3,"sources":["meteor://ðŸ’»app/packages/ohif:core/main.js","meteor://ðŸ’»app/packages/ohif:core/client/index.js","meteor://ðŸ’»app/packages/ohif:core/client/routes.js","meteor://ðŸ’»app/packages/ohif:core/client/components/index.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/component.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/index.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixin.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/template.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/action.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/button.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/checkbox.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/component.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/dropdown.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/form.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/formItem.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/group.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/groupRadio.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/input.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/link.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/popover.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/schemaData.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/select.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/mixins/select2.js","meteor://ðŸ’»app/packages/ohif:core/client/components/base/section/section.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/index.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/dialog/form.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/dialog/info.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/dialog/loading.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/dialog/login.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/dialog/progress.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/dialog/simple.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/dialog/unsavedChangesDialog.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/dropdown/form.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/notification/index.js","meteor://ðŸ’»app/packages/ohif:core/client/components/bootstrap/notification/notificationNote.js","meteor://ðŸ’»app/packages/ohif:core/client/components/pages/index.js","meteor://ðŸ’»app/packages/ohif:core/client/components/pages/error/error.js","meteor://ðŸ’»app/packages/ohif:core/client/components/pages/error/index.js","meteor://ðŸ’»app/packages/ohif:core/client/components/pages/message/index.js","meteor://ðŸ’»app/packages/ohif:core/client/components/paginationArea/index.js","meteor://ðŸ’»app/packages/ohif:core/client/components/paginationArea/paginationArea.js","meteor://ðŸ’»app/packages/ohif:core/client/components/playground/playground.js","meteor://ðŸ’»app/packages/ohif:core/client/components/scrollArea/index.js","meteor://ðŸ’»app/packages/ohif:core/client/components/scrollArea/scrollArea.js","meteor://ðŸ’»app/packages/ohif:core/client/helpers/blaze.js","meteor://ðŸ’»app/packages/ohif:core/client/helpers/data.js","meteor://ðŸ’»app/packages/ohif:core/client/helpers/debug.js","meteor://ðŸ’»app/packages/ohif:core/client/helpers/index.js","meteor://ðŸ’»app/packages/ohif:core/client/helpers/logical.js","meteor://ðŸ’»app/packages/ohif:core/client/helpers/number.js","meteor://ðŸ’»app/packages/ohif:core/client/helpers/string.js","meteor://ðŸ’»app/packages/ohif:core/client/helpers/typing.js","meteor://ðŸ’»app/packages/ohif:core/client/helpers/ui.js","meteor://ðŸ’»app/packages/ohif:core/client/lib/blaze.js","meteor://ðŸ’»app/packages/ohif:core/client/lib/cornerstone.js","meteor://ðŸ’»app/packages/ohif:core/client/lib/index.js","meteor://ðŸ’»app/packages/ohif:core/client/lib/string.js","meteor://ðŸ’»app/packages/ohif:core/client/lib/ui.js","meteor://ðŸ’»app/packages/ohif:core/client/lib/utils.js","meteor://ðŸ’»app/packages/ohif:core/client/lib/viewer.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/handleError.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/index.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/styleProperty.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/bounded/bounded.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/dialog/display.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/dialog/spatial.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/dialog/unsavedChangesDialog.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/dimensional/dimensional.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/draggable/draggable.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/dropdown/class.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/dropdown/display.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/notifications/notifications.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/popover/display.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/resizable/resizable.js","meteor://ðŸ’»app/packages/ohif:core/client/ui/unsavedChanges/unsavedChanges.js","meteor://ðŸ’»app/packages/ohif:core/both/index.js","meteor://ðŸ’»app/packages/ohif:core/both/schema.js","meteor://ðŸ’»app/packages/ohif:core/both/lib/index.js","meteor://ðŸ’»app/packages/ohif:core/both/lib/object.js","meteor://ðŸ’»app/packages/ohif:core/both/utils/absoluteUrl.js","meteor://ðŸ’»app/packages/ohif:core/both/utils/index.js","meteor://ðŸ’»app/packages/ohif:core/both/utils/objectPath.js"],"names":["module","export","OHIF","Meteor","watch","require","v","log","ui","utils","viewer","cornerstone","isClient","window","$","Router","onRun","document","body","trigger","next","isDevelopment","route","render","Component","templateInstance","view","_component","sections","registeredItems","Set","registerSelf","parent","blaze","getParentComponent","add","unregisterSelf","delete","_","mixins","Mixin","dependencies","composition","init","template","data","applied","behaviors","dependenciesArray","split","each","dependency","mixin","getMixin","Error","apply","contains","functionName","behavior","push","initData","mixinsArray","appliedOnData","mixinName","initAll","appliedCommon","appliedOnMixins","Template","Blaze","baseComponent","constructView","contentFunc","elseFunc","currentData","base","baseTemplate","cloneTemplate","renderFunction","wrappers","wrappersList","wrapper","wrapperInstances","contentFunction","innerContentFunction","onCreated","instance","component","forEach","wrapperInstance","With","wrapperTemplate","currentTemplate","childContentFunction","enclosingContentFunction","shift","action","onRendered","$element","addClass","events","event","preventDefault","params","$focused","applyFocus","currentTarget","setTimeout","focus","hasClass","api","getApi","actionResult","call","Promise","form","getForm","disable","$spinner","prepend","finishAction","remove","then","catch","button","first","checkbox","value","isGet","isUndefined","parseData","is","prop","ReactiveVar","dropdown","options","centered","marginTop","$parentLi","reactiveClose","$dropdown","$dropdownMenu","children","dismissTimeout","opening","destroyView","destroyHandle","timeout","one","clearTimeout","removeClass","promise","closeSubmenu","focusSelf","lastSubmenu","set","close","isResolve","result","method","param","closed","autorun","isClosed","get","items","length","oncontextmenu","cssBefore","position","bounded","css","defer","find","originalEventTouches","originalEvent","touches","left","top","pageX","pageY","clientX","clientY","outerWidth","outerHeight","$parentDm","closest","dmWidth","pdmWidth","pdmOffset","offset","pliOffset","getOffset","Object","assign","rightToLeft","clientWidth","menuClass","isFixed","innerHeight","$target","isDisabled","target","showDropdown","parentInstance","promiseResolve","stopPropagation","key","which","$liList","index","$newLi","eq","prev","$focus","hasFocus","currentInstance","Tracker","Spacebars","isForm","isValidatedAlready","validationObserver","Dependency","pathKey","validationRan","throttle","changed","validateSelf","validate","validationResult","schema","_invalidKeys","afterFlush","$style","onsubmit","targetKey","attr","helpers","validationErrors","depend","label","_schema","item","name","message","keyErrorMessage","replace","SafeString","formItem","changeObserver","$wrapper","val","isDisable","readonly","isReadonly","show","isShow","focused","isEqual","state","flag","toggleClass","error","errorMessage","removeAttr","toggleTooltip","tooltipId","$tooltip","getElementById","text","tooltip","title","toggleMessage","currentComponent","object","getNestedObject","validateOne","triggerFormMainButton","$form","$formButton","click","computation","firstRun","onDestroyed","onMixins","change","isGroupOrCustomFocus","isGroup","isCustomFocus","isSameTarget","blur","group","newContext","isArray","arrayValues","child","indexOf","groupValue","i","childValue","found","itemKey","resetValidation","groupRadio","elements","$elements","filter","input","link","popover","promiseReject","getCurrentSchemaDefs","parentComponent","schemaComponentHolder","currentSchema","clone","Array","type","extend","schemaData","onData","currentView","parentKey","isParentArray","prefix","min","max","emptyOption","allowedValues","schemaDefs","componentHolder","dep","values","labels","valuesLabels","dataType","schemaType","Number","parseFloat","Boolean","defaultValue","select","select2","isInitialized","valueMethod","getDropdownContainerElement","$select2","nextAll","containerId","placeholder","isReactive","findWhere","newItems","unshift","rebuildSelect2","select2Instance","destroy","$closestModal","dropdownParent","on","isFocused","currentValue","wasFocused","minimumResultsForSearch","Infinity","$container","wrapText","$searchInput","off","section","sectionData","sectionName","templateContentBlock","getParentTemplateView","_sectionMap","Map","_templateInstance","getSectionContent","registerHelper","dialogForm","dismissModal","promiseFunction","modal","confirm","formData","dismiss","isFunction","confirmCallback","cancel","cancelCallback","modalOptions","backdrop","keyboard","$modal","x","y","repositionDialog","keydown","keyCode","handled","isError","dialogInfo","dialogLoading","SimpleSchema","dialogLogin","username","String","password","dialogProgress","processed","total","task","progressDialog","done","update","Math","setTotal","setMessage","run","progress","dialogSimple","MARGIN_RIGHT","MARGIN_BOTTOM","unsavedChangesDialog","displayModal","displayModalWithPosition","origCSS","display","visibility","dimension","$dialog","dialogRect","parseInt","size","width","height","modalSize","margin","callback","choice","dropdownFormMenu","isVisible","visible","getText","notificationNote","$note","notifications","id","pageError","shallDisplayErrorStack","getDefaultErrorMessage","visiblePages","paginationArea","rowsPerPage","$paginationControl","recordCount","twbsPagination","totalPages","ceil","onPageClick","page","currentPage","isRowsPerPageSelected","layoutState","leftSidebar","rightSidebar","toolsDrawer","componentPlayground","adjustMax","currentState","scrollArea","defaultConfig","hideScrollbar","scrollY","scrollX","scrollStep","config","defaults","adjustMargins","$scrollable","scrollbarSize","getScrollbarSize","scrollHandler","$scrollArea","scrollTop","scrollHeight","siblings","currentTop","limit","stop","animate","Session","absoluteUrl","path","parameter","argsArray","lastArg","last","kwHash","hash","objects","initial","current","newArgs","slice","debug","a","b","condition","valueIfTrue","valueIfFalse","isNaN","args","string","encodeId","isObject","uiSettings","newName","viewName","inheritsEventsFrom","inheritsHelpersFrom","inheritsHooksFrom","getParentView","parentViewName","originalParentView","parentView","property","getBoundingBox","context","textLines","prototype","toString","padding","font","cornerstoneTools","textStyle","getFont","fontSize","getFontSize","save","textBaseline","maxWidth","measureText","boundingBox","centering","restore","pixelToPage","element","enabledElement","getEnabledElement","canvas","canvasOffset","canvasPosition","pixelToCanvas","repositionTextBox","eventData","measurementData","isCreating","image","allowedBorders","autoPositionMeasurementsTextCallOuts","allow","T","R","B","L","getAvailableBlankAreas","labelWidth","labelHeight","topLeft","bottomRight","$canvas","canvasWidth","canvasHeight","x1","y1","getRenderingInformation","limits","tool","mid","directions","diffX","diffY","cornerAxis","map","calculateAxisCenter","axis","start","end","lowest","highest","getTextBoxSizeInPixels","bounds","pageToPixel","getTextBoxOffset","toolAxis","boxSize","centerX","centerY","halfBoxSizeX","halfBoxSizeY","offsetY","offsetX","handles","textBox","canvasDimensions","getHandlePosition","pick","availableAreas","tempDirections","tempCornerAxis","foundPlace","cornerAxisPosition","toolPositionOnCanvas","renderingInformation","pixelPosition","textBoxOffset","canvasBorders","x0","y0","search","query","pattern","RegExp","trim","isString","test","converter","match","charCodeAt","settings","public","offsetParent","offsetLeft","offsetTop","inner","createElement","style","outer","overflow","appendChild","w1","offsetWidth","h1","offsetHeight","w2","h2","clientHeight","removeChild","sortBy","fields","arguments","n_fields","A","field","primer","reverse","handleError","reason","hideConfirm","cancelLabel","cancelClass","styleProperty","browserProps","eachVendor","fn","prefixes","charAt","toUpperCase","check","testValue","sandbox","contentDocument","support","parentElement","checkComputed","el","computed","getComputedStyle","getPropertyValue","vendorProp","boundedInstance","removeData","Bounded","setBoundedFlag","useTransform","boundingElement","positionElement","dimensionElement","allowResizing","$positionElement","$dimensionElement","$boundingElement","defineEventHandlers","attachEventHandlers","$window","windowResizeHandler","documentElement","detachEventHandlers","spatialInfo","elementPosition","positionProperty","cssPositionHandler","elementInfo","boundingInfo","getCSSTranslate","matrixToArray","str","transformMatrix","cssTransformHandler","translate","translation","spatialChangedHandler","showDialog","templateName","dialogData","templateData","resolve","reject","renderWithData","node","firstNode","$node","has","hideFirst","$body","navigationHandler","keepOpenOnNavigation","toggle","tempShow","elementsToHide","modifierFn","maxProperty","e","setProperty","dimensionFn","removeProperty","draggable","makeDraggable","container","wasNotDragged","dragging","lastCursor","lastOffset","lastTranslateX","lastTranslateY","defaultElementCursor","getCursorCoords","cursor","undefined","reposition","elementLeft","elementTop","bottom","right","startMoving","moveHandler","stopMoving","elementWidth","elementHeight","containerWidth","containerHeight","limitX","limitY","sumX","sumY","Dropdown","observer","_items","clearItems","setItems","addItem","removeItem","without","getItems","dropdownForm","Notifications","currentId","views","removeView","isDestroyed","clear","from","keys","templateObject","$area","notificationPromise","dismissNotification","info","o","success","warning","danger","showPopover","popoverData","content","html","placement","delay","hide","popoverOptions","toHTMLWithData","popoverId","$popover","$popoverContent","dismissPopover","resizable","resizableInstance","Resizable","boundSize","minWidth","minHeight","createBound","$bound","initResizeHandler","initialWidth","initialHeight","startWidth","startHeight","posX","posY","startPosX","startPosY","startX","startY","resizeHandler","endResizeHandler","xDirection","yDirection","innerWidth","xDistance","yDistance","onselectstart","mapX","mapY","appendTo","unsavedChanges","FUNCTION","STRING","UNDEFINED","WILDCARD","SEPARATOR","Node","handlers","getPathComponents","getNodeUpToIndex","hasOwnProperty","append","probe","recursively","appendPath","clearPath","probePath","attachHandler","handler","list","notFound","removeHandler","splice","nonRecursively","attachHandlerForPath","removeHandlerForPath","triggerHandlersForPath","rootNode","hooks","checkBeforeAction","hasChanges","shouldProceed","dialogOptions","presentProactiveDialog","addHook","saveCallback","removeHook","confirmNavigation","navigateCallback","dialogPresented","every","userChoice","extendOptions","Match","Optional","textOptional","addValidator","definition","optional","messages","maxCount","minCount","notAllowed","nestedObject","shallowObject","propertyArray","currentObject","currentProperty","getShallowObject","putValues","baseKey","resultObject","currentKey","absolutePath","absoluteUrlParts","rootUrlPrefixIndex","substring","ObjectPath","components","isValidObject","isValid"],"mappings":"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","file":"/packages/ohif_core.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\n/*\n * Defines the base OHIF object\n */\n\nconst OHIF = {\n    log: {},\n    ui: {},\n    utils: {},\n    viewer: {},\n    cornerstone: {}\n};\n\n// Expose the OHIF object to the client if it is on development mode\n// @TODO: remove this after applying namespace to this package\nif (Meteor.isClient) {\n    window.OHIF = OHIF;\n}\n\nexport { OHIF };\n","import './lib';\nimport './helpers';\nimport './components';\nimport './ui';\n\nimport './routes.js';\n","import { Meteor } from 'meteor/meteor';\nimport { $ } from 'meteor/jquery';\nimport { Router } from 'meteor/iron:router';\n\nRouter.onRun(function() {\n    $(document.body).trigger('ohif.navigated');\n    this.next();\n});\n\nif (Meteor.isDevelopment) {\n    Router.route('/playground', function() {\n        this.render('componentPlayground');\n    });\n}\n","import './base';\nimport './bootstrap';\nimport './pages';\nimport './paginationArea';\nimport './playground/playground.html';\nimport './playground/playground.styl';\nimport './playground/playground.js';\nimport './scrollArea';\n","import { OHIF } from 'meteor/ohif:core';\n\n/*\n * Base component to template instances of all dynamic components\n */\nclass Component {\n\n    // Set up the component\n    constructor(templateInstance) {\n        // Store the component in the current view\n        templateInstance.view._component = this;\n\n        // Create an object to register section's content\n        templateInstance.sections = {};\n\n        // Store the template instance in the component\n        this.templateInstance = templateInstance;\n\n        // Store the component's registered sub-components\n        this.registeredItems = new Set();\n    }\n\n    // Self register the component in its first parent component\n    registerSelf() {\n        const parent = OHIF.blaze.getParentComponent(this.templateInstance.view);\n        if (parent) {\n            // Store this component's parent in a property\n            this.parent = parent;\n\n            // Add this component in its parent's registered items list\n            parent.registeredItems.add(this);\n        }\n    }\n\n    // Self unregister the component in its first parent component\n    unregisterSelf() {\n        const parent = OHIF.blaze.getParentComponent(this.templateInstance.view);\n        if (parent) {\n            // Remove the parent property from this component\n            delete this.parent;\n\n            // Remove this component from its parent's registered items list\n            parent.registeredItems.delete(this);\n        }\n    }\n\n}\n\nOHIF.Component = Component;\n","// Core files\nimport './component.js';\nimport './mixin.js';\nimport './template.js';\n\n// Section\nimport './section/section.html';\nimport './section/section.js';\n\n// Mixins\nimport './mixins/action.js';\nimport './mixins/button.js';\nimport './mixins/checkbox.js';\nimport './mixins/component.js';\nimport './mixins/dropdown.js';\nimport './mixins/form.js';\nimport './mixins/formItem.js';\nimport './mixins/group.js';\nimport './mixins/groupRadio.js';\nimport './mixins/input.js';\nimport './mixins/link.js';\nimport './mixins/popover.js';\nimport './mixins/schemaData.js';\nimport './mixins/select.js';\nimport './mixins/select2.js';\n\n// Templates\nimport './templates/button.html';\nimport './templates/custom.html';\nimport './templates/div.html';\nimport './templates/form.html';\nimport './templates/input.html';\nimport './templates/link.html';\nimport './templates/select.html';\nimport './templates/tr.html';\n\n// wrappers\nimport './wrappers/label.html';\nimport './wrappers/labelContent.html';\n","import { OHIF } from 'meteor/ohif:core';\nimport { _ } from 'meteor/underscore';\n\n// Create an object to store all the application mixins\nOHIF.mixins = {};\n\n// Class to manage new mixins and its dependencies\nclass Mixin {\n\n    // Create the mixin instance\n    constructor({ dependencies, composition }) {\n        // Store the mixin dependencies\n        this.dependencies = dependencies || '';\n\n        // Store the mixin composition\n        this.composition = composition;\n    }\n\n    // Initialize the mixin applying all its composition functions\n    init(template, data, applied, behaviors) {\n        const dependenciesArray = this.dependencies.split(' ');\n        _.each(dependenciesArray, dependency => {\n            // Go to next dependency if the current dependency string is blank\n            if (!dependency) {\n                return;\n            }\n\n            // Get the dependent mixin to be initizalized\n            const mixin = Mixin.getMixin(dependency);\n\n            // Throw an error if a cyclic dependency was found on this mixin\n            if (mixin === this) {\n                throw new Error(`Mixin ${dependency} has a cyclic dependency.`);\n            }\n\n            // Initizalize the mixin dependencies recursively\n            mixin.init(template, data, applied, behaviors);\n        });\n\n        // Apply the mixin's composition behaviors to the template\n        this.apply(template, data, applied, behaviors);\n    }\n\n    // Add the mixin's composition behaviors to the template\n    apply(template, data, applied, behaviors) {\n        // Ignore if the mixin was already applied to the template\n        if (_.contains(applied, this)) {\n            return;\n        }\n\n        // Store the mixin's composition\n        const composition = this.composition;\n\n        // Iterate over each behavior\n        _.each(behaviors, behavior => {\n            // Execute something only after all the mixins are done\n            let functionName = behavior;\n            if (functionName === 'onMixins') {\n                functionName = 'onRendered';\n            }\n\n            if (behavior === 'onData' && composition[behavior]) {\n                // If it's just data manipulation, call it immediately\n                composition[behavior](data);\n            } else if (composition[behavior]) {\n                // Register the behavior in the template\n                template[functionName](composition[behavior]);\n            }\n        });\n\n        // Set the current mixin's state as applied\n        applied.push(this);\n    }\n\n    // Initialize all data manipulation mixins\n    static initData(data) {\n        // Split the mixins by space\n        const mixinsArray = data.mixins.split(' ');\n\n        // Control and ignore the mixins that have already been applied\n        const appliedOnData = [];\n        _.each(mixinsArray, mixinName => {\n            // Ignore blank strings\n            if (!mixinName) {\n                return;\n            }\n\n            // Get the current mixin\n            const mixin = Mixin.getMixin(mixinName);\n\n            // Initialize the data manipulation composition\n            mixin.init(null, data, appliedOnData, ['onData']);\n        });\n    }\n\n    // Initialize all the template's mixins\n    static initAll(template, data) {\n        // Split the mixins by space\n        const mixinsArray = data.mixins.split(' ');\n\n        // Control and ignore the mixins that have already been applied\n        const appliedCommon = [];\n        const appliedOnMixins = [];\n        _.each(mixinsArray, mixinName => {\n            // Ignore blank strings\n            if (!mixinName) {\n                return;\n            }\n\n            // Get the current mixin\n            const mixin = Mixin.getMixin(mixinName);\n\n            // Initialize blaze default compositions\n            mixin.init(template, data, appliedCommon, ['onCreated', 'onRendered', 'onDestroyed', 'events', 'helpers']);\n\n            // Execute some behaviors after all mixins are applied\n            mixin.init(template, data, appliedOnMixins, ['onMixins']);\n        });\n    }\n\n    // Get a mixin by name\n    static getMixin(mixinName) {\n        // Get the mixin from mixins object\n        const mixin = OHIF.mixins[mixinName];\n\n        // Throw an error if the mixin does not exists\n        if (!mixin) {\n            throw new Error(`Mixin ${mixinName} not found.`);\n        }\n\n        // Return the found mixin\n        return mixin;\n    }\n\n}\n\n// Store the Mixin class inside the shared OHIF object\nOHIF.Mixin = Mixin;\n","import { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\nimport { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\n// Create a new custom template for the base component\nTemplate.baseComponent = new Template('baseComponent', () => {});\n\n// Inject some custom behaviors in the  view's construction function\nTemplate.baseComponent.constructView = function(contentFunc, elseFunc) {\n    // Get the data passed to the template\n    const data = Template.currentData();\n\n    if (!data) {\n        return;\n    }\n\n    // Check the base template. If it's not informed set as the custom base\n    data.base || (data.base = 'baseCustom');\n\n    // Get the base template object\n    const baseTemplate = Template[data.base];\n\n    // Throw an error if the base template does not exists\n    if (!baseTemplate) {\n        throw new Error(`Template ${data.base} not found.`);\n    }\n\n    // Declare the template object and name it as base name + 'Component'\n    const template = OHIF.blaze.cloneTemplate(baseTemplate, data.base + 'Component');\n\n    // Extract the render function from the base template\n    template.renderFunction = baseTemplate.renderFunction;\n\n    // Init the data manipulation mixins\n    OHIF.Mixin.initData(data);\n\n    // Create and fill a list of wrappers that will enclose the component\n    const wrappers = [];\n    if (data.wrappers) {\n        const wrappersList = data.wrappers.split(' ');\n        _.each(wrappersList, wrapper => wrapper && wrappers.push(wrapper));\n    }\n\n    // Declare a variable to store the wrapper instances that will be rendered\n    const wrapperInstances = [];\n\n    // Declare the content function to render the component\n    let contentFunction = () => {\n        // Create the most inner content function\n        const innerContentFunction = () => {\n            // Return the view instance\n            return template.constructView(contentFunc, elseFunc);\n        };\n\n        // Assign properties to all wrappers after template's creation\n        template.onCreated(() => {\n            const instance = Template.instance();\n\n            // create the base structure to aplly specific component mixins\n            instance.component = new OHIF.Component(instance);\n\n            // Assign the template most outer wrapper\n            instance.wrapper = wrapperInstances[0] || instance;\n\n            // Iterate over all wrappers and assign the component to them\n            wrapperInstances.forEach(wrapperInstance => {\n                wrapperInstance.component = instance.component;\n            });\n        });\n\n        // Apply the mixins to the component\n        OHIF.Mixin.initAll(template, data);\n\n        // Return the recursive function for wrappers\n        return Blaze.With(data, innerContentFunction);\n    };\n\n    let wrapper;\n    while (wrapper = wrappers.shift()) {\n        // Get the wrapper template\n        const wrapperTemplate = Template[wrapper];\n\n        // Throw an error if the wrapper template does not exists\n        if (!wrapperTemplate) {\n            throw new Error(`Template ${wrapper} not found.`);\n        }\n\n        // Clone the wrapper template to avoid assigning duplicated handlers\n        const currentTemplate = OHIF.blaze.cloneTemplate(wrapperTemplate);\n\n        // Store the child content function to render it inside the wrapper\n        const childContentFunction = contentFunction;\n\n        // Create a function that will enable the recursion for wrappers\n        const enclosingContentFunction = () => {\n            // Add the current wrapper's instance to the wrapper instances list\n            currentTemplate.onCreated(() => wrapperInstances.push(Template.instance()));\n\n            // Return the wrapper view instance with its child as content\n            return currentTemplate.constructView(childContentFunction, elseFunc);\n        };\n\n        // Replace the content function enclosing it recursively\n        contentFunction = () => {\n            return Blaze.With(data, enclosingContentFunction);\n        };\n\n    }\n\n    return contentFunction(contentFunc, elseFunc);\n};\n","import { Template } from 'meteor/templating';\nimport { $ } from 'meteor/jquery';\nimport { OHIF } from 'meteor/ohif:core';\n\n/*\n * action: controls an element that will trigger some form API's method\n */\nOHIF.mixins.action = new OHIF.Mixin({\n    dependencies: 'formItem',\n    composition: {\n        onRendered() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Add the form-action identification class\n            component.$element.addClass('form-action');\n        },\n\n        events: {\n            'click .form-action'(event, instance) {\n                event.preventDefault();\n                const component = instance.component;\n\n                // Extract action, disabled state and params\n                const { action } = instance.data;\n                const params = instance.data.params ? instance.data.params : event;\n\n                // Set the focus back to the input that triggered the click with Enter key\n                const $focused = $(':focus');\n                const applyFocus = () => {\n                    if ($focused[0] && event.currentTarget !== $focused[0]) {\n                        setTimeout(() => $focused.focus());\n                    }\n                };\n\n                // Stop here if the component is disabled\n                if (component.$element.hasClass('disabled')) return;\n\n                // Get the current component's API\n                const api = component.getApi();\n\n                if (typeof action === 'function') {\n                    // Call the action if it's a function\n                    component.actionResult = action.call(event.currentTarget, params, event);\n                } else if (!api || !action || typeof api[action] !== 'function') {\n                    // Stop here if no API or action was defined\n                    return true;\n                } else {\n                    // Call the defined action function\n                    component.actionResult = api[action].call(event.currentTarget, params, event);\n                }\n\n                // Prepend a spinner into the action element content if it's a promise\n                if (component.actionResult instanceof Promise) {\n                    const form = component.getForm();\n                    form.disable(true);\n                    const $spinner = $('<i class=\"fa fa-spin fa-circle-o-notch fa-fw m-r\"></i>');\n                    component.$element.prepend($spinner);\n                    const finishAction = () => {\n                        $spinner.remove();\n                        form.disable(false);\n                        applyFocus();\n                    };\n\n                    component.actionResult.then(finishAction).catch(finishAction);\n                } else {\n                    applyFocus();\n                }\n            }\n        }\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\n\n/*\n * button: controls a button\n */\nOHIF.mixins.button = new OHIF.Mixin({\n    dependencies: 'formItem',\n    composition: {\n        onRendered() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Set the element to be controlled\n            component.$element = instance.$('button').first();\n        }\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\nimport { _ } from 'meteor/underscore';\n\n/*\n * inputCheckbox: controls a checkbox input\n */\nOHIF.mixins.checkbox = new OHIF.Mixin({\n    dependencies: 'input',\n    composition: {\n        onCreated() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Get or set the checked state using jQuery's prop method\n            component.value = value => {\n                const isGet = _.isUndefined(value);\n                if (isGet) {\n                    return component.parseData(component.$element.is(':checked'));\n                }\n\n                component.$element.prop('checked', value).trigger('change');\n            };\n        }\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\n\n/*\n * component: base component structure\n */\nOHIF.mixins.component = new OHIF.Mixin({\n    composition: {\n    }\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { $ } from 'meteor/jquery';\nimport { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\n/*\n * dropdown: controls a dropdown\n */\nOHIF.mixins.dropdown = new OHIF.Mixin({\n    dependencies: 'form',\n    composition: {\n        onRendered() {\n            const instance = Template.instance();\n            const { event, centered, marginTop, $parentLi, reactiveClose } = instance.data.options;\n            // Get the dropdown element to enable position manipulation\n            const $dropdown = instance.$('.dropdown');\n            const dropdown = $dropdown[0];\n            const $dropdownMenu = $dropdown.children('.dropdown-menu');\n\n            // Get the timeout to dismiss the dropdown form\n            let { dismissTimeout } = instance.data.options;\n            if (_.isUndefined(dismissTimeout)) {\n                dismissTimeout = 500;\n            }\n\n            // Set a opening state to the component\n            instance.opening = true;\n\n            // Destroy the Blaze created view (either created with template calls or with renderWithData)\n            instance.destroyView = () => {\n                const destroyHandle = () => {\n                    if (typeof instance.data.destroyView === 'function') {\n                        instance.data.destroyView();\n                    } else {\n                        Blaze.remove(instance.view);\n                    }\n                };\n\n                const timeout = setTimeout(destroyHandle, dismissTimeout);\n                $dropdownMenu.one('transitionend', () => {\n                    destroyHandle();\n                    clearTimeout(timeout);\n                });\n                $dropdown.removeClass('open');\n            };\n\n            // Destroy the view when the promise is fullfilled\n            instance.data.promise.then(instance.destroyView, instance.destroyView);\n\n            // Close submenu if exists\n            instance.closeSubmenu = focusSelf => {\n                if (instance.reactiveClose) {\n                    if (focusSelf) {\n                        $(instance.lastSubmenu).focus();\n                    }\n\n                    instance.reactiveClose.set(true);\n                    delete instance.reactiveClose;\n                    delete instance.lastSubmenu;\n                }\n            };\n\n            // Close the dropdown resolving or rejecting the promise\n            instance.close = (isResolve, result) => {\n                const method = instance.data[isResolve ? 'promiseResolve' : 'promiseReject'];\n                const param = result instanceof Promise ? null : result;\n                method(param);\n                instance.closeSubmenu(false);\n                instance.closed = true;\n            };\n\n            // Close the dropdown if the reactiveClose suffered changes\n            if (reactiveClose) {\n                instance.autorun(() => {\n                    const isClosed = reactiveClose.get();\n                    if (!isClosed) return;\n                    instance.close(false);\n                });\n            }\n\n            // Stop here and destroy the view if no items was given\n            if (!instance.data.items.length) {\n                return instance.close(false);\n            }\n\n            dropdown.oncontextmenu = () => false;\n\n            const cssBefore = {};\n            if (event) {\n                cssBefore.position = 'fixed';\n                $dropdownMenu.bounded();\n            }\n\n            if (marginTop) {\n                cssBefore['margin-top'] = marginTop;\n            }\n\n            $dropdownMenu.css(cssBefore);\n\n            // Postpone visibility change to allow CSS transitions\n            Meteor.defer(() => {\n                // Show the dropdown and focus the first option\n                $dropdown.addClass('open').find('a:first').focus();\n\n                // Add a handler to change the opening state\n                $dropdownMenu.one('transitionend', event => {\n                    instance.opening = false;\n                });\n\n                // Change the dropdown position if mouse event was given\n                if (event) {\n                    const originalEventTouches = event.originalEvent && event.originalEvent.touches;\n                    const position = {\n                        left: 0,\n                        top: 0\n                    };\n\n                    if (originalEventTouches && originalEventTouches.length > 0) {\n                        position.left = originalEventTouches[0].pageX;\n                        position.top = originalEventTouches[0].pageY;\n                    } else {\n                        position.left = event.clientX;\n                        position.top = event.clientY;\n                    }\n\n                    if (centered) {\n                        // Center the dropdown menu based on the event mouse position\n                        position.left -= $dropdownMenu.outerWidth() / 2;\n                        position.top -= $dropdownMenu.outerHeight() / 2;\n                    } else if ($parentLi) {\n                        // Change the dropdown menu position based on the parent menu item\n                        const $parentDm = $parentLi.closest('.dropdown-menu');\n                        const dmWidth = $dropdownMenu.outerWidth();\n                        const pdmWidth = $parentDm.outerWidth();\n                        const pdmOffset = $parentDm.offset();\n                        const pliOffset = OHIF.ui.getOffset($parentLi[0]);\n                        Object.assign(position, {\n                            left: pdmWidth + pdmOffset.left,\n                            top: pliOffset.top\n                        });\n\n                        // Check if the element position is going beyond the window right boundary\n                        let rightToLeft = false;\n                        if (position.left < pdmOffset.left + pdmWidth || position.left > document.body.clientWidth - dmWidth) {\n                            position.left -= pdmWidth + $dropdownMenu.outerWidth();\n                            rightToLeft = true;\n                        }\n\n                        const menuClass = rightToLeft ? 'origin-top-right' : 'origin-top-left';\n                        $dropdownMenu.addClass(menuClass);\n                    }\n\n                    // Fix dropdown position if it is going outside the window boundaries\n                    $dropdownMenu.css(position).trigger('spatialChanged');\n\n                    // Check if scrolling will be needed\n                    const isFixed = $dropdownMenu.css('position') === 'fixed';\n                    if (isFixed && $dropdownMenu.outerHeight() > window.innerHeight) {\n                        $dropdownMenu.css({\n                            'overflow-y': 'scroll',\n                            'max-height': window.innerHeight\n                        });\n                    }\n                }\n            });\n        },\n\n        events: {\n            'click .form-action'(event, instance) {\n                const $target = $(event.currentTarget);\n                const isDisabled = $target.hasClass('disabled');\n\n                if (isDisabled) {\n                    instance.close(false);\n                } else {\n                    const component = $target.data('component');\n                    instance.close(true, component.actionResult);\n                }\n            },\n\n            'mouseenter .form-action, openSubmenu .form-action'(event, instance) {\n                // Postpone the submenu opening if it's still being animated\n                if (instance.opening) {\n                    instance.$('.dropdown-menu').one('transitionend', event => {\n                        $(event.currentTarget).trigger('openSubmenu');\n                    });\n\n                    return;\n                }\n\n                // Stop here if dropdown is already closed or event was triggered in child elements\n                if (instance.closed || event.target !== event.currentTarget) return;\n\n                // Close the submenu if a sibling element was hovered\n                if (instance.lastSubmenu && instance.lastSubmenu !== event.currentTarget) {\n                    instance.closeSubmenu(!this.items);\n                }\n\n                // Stop here if submenu is already opened for the current menu item\n                if (!this.items || instance.lastSubmenu === event.currentTarget) return;\n\n                // Close the current opened submenu (if exists) in order to open another one\n                instance.closeSubmenu(!this.items);\n\n                // Set the reactive closing elementcontroller and the last submenu element trigger\n                const reactiveClose = new ReactiveVar(false);\n                instance.reactiveClose = reactiveClose;\n                instance.lastSubmenu = event.currentTarget;\n\n                // Get the triggering li element and render the submenu\n                const $parentLi = $(event.currentTarget).closest('li');\n                OHIF.ui.showDropdown(this.items, {\n                    event,\n                    reactiveClose: instance.reactiveClose,\n                    $parentLi,\n                    parentInstance: instance,\n                    dismissTimeout: instance.data.options && instance.data.options.dismissTimeout\n                }).then(instance.data.promiseResolve).catch(() => {});\n            },\n\n            'keydown .form-action'(event, instance) {\n                event.stopPropagation();\n                const key = event.which;\n                const $target = $(event.currentTarget);\n\n                // Allow navigation using DOWN and UP arrow keys\n                if (key === 38 || key === 40) {\n                    const $parentLi = $target.closest('li');\n                    const $liList = $parentLi.parent().children();\n                    const index = $parentLi.index();\n\n                    let $newLi;\n                    if (key === 38) {\n                        // Control the UP key\n                        if (index === 0) {\n                            $newLi = $liList.eq($liList.length - 1);\n                        } else {\n                            $newLi = $parentLi.prev();\n                        }\n                    } else {\n                        // Control the DOWN key\n                        if (index === $liList.length - 1) {\n                            $newLi = $liList.eq(0);\n                        } else {\n                            $newLi = $parentLi.next();\n                        }\n                    }\n\n                    // Focus the link inside the new li element\n                    event.preventDefault();\n                    $newLi.find('a:first').focus();\n                    return;\n                }\n\n                // Close the submenu if LEFT, BACKSPACE or ESC key was pressed\n                const { parentInstance } = instance.data.options;\n                if (parentInstance && (key === 37 || key === 8 || key === 27)) {\n                    event.preventDefault();\n                    return parentInstance.closeSubmenu(true);\n                }\n\n                // Close the dropdown if there's no submenu open and ESC key was pressed\n                if (!parentInstance && key === 27) {\n                    return instance.close(false);\n                }\n\n                // Stop here if it's not a submenu trigger\n                if (!this.items) return;\n\n                // Open the submenu if RIGHT, ENTER or SPACE key was pressed\n                if (key === 39 || key === 13 || key === 32) {\n                    $target.trigger('openSubmenu');\n                    event.preventDefault();\n                }\n            },\n\n            'mousedown .dropdown'(event) {\n                // This is required to stop blur event which is fired before click event\n                // when a dropdown item is clicked, otherwise click event is not fired\n                event.stopPropagation();\n            },\n\n            'blur .dropdown'(event, instance) {\n                // Stop here if it's closed or if it's a submenu not being closed\n                if (instance.closed) return;\n                if (instance.reactiveClose && !instance.reactiveClose.get()) return;\n\n                // Postpone the execution to enable getting the focused element\n                Meteor.defer(() => {\n                    const $focus = $(':focus');\n\n                    // Iterate over all parent dropdowns and check if one of them has the focus\n                    let hasFocus = false;\n                    let currentInstance = instance;\n                    do {\n                        if ($.contains(currentInstance.$('.dropdown')[0], $focus[0])) {\n                            hasFocus = true;\n                            break;\n                        }\n\n                        if (!currentInstance.data.options.parentInstance) {\n                            break;\n                        } else {\n                            currentInstance = currentInstance.data.options.parentInstance;\n\n                            // Close the current instance's submenu as it has no focus\n                            currentInstance.closeSubmenu(false);\n                        }\n                    } while (currentInstance);\n\n                    // Close all dropdown levels if it lost the focus\n                    if (!hasFocus) {\n                        currentInstance.close(false);\n                    }\n                });\n            }\n        }\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\nimport { Tracker } from 'meteor/tracker';\nimport { Spacebars } from 'meteor/spacebars';\nimport { _ } from 'meteor/underscore';\nimport { $ } from 'meteor/jquery';\n\n/*\n * form: controls a form and its registered inputs\n */\nOHIF.mixins.form = new OHIF.Mixin({\n    dependencies: 'group',\n    composition: {\n        onCreated() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Set the form identifier flag\n            component.isForm = true;\n\n            // Set the form validated flag\n            component.isValidatedAlready = false;\n\n            component.validationObserver = new Tracker.Dependency();\n\n            // Reset the pathKey\n            instance.data.pathKey = '';\n\n            // Debound the observer call to prevent tons of re-rendering\n            component.validationRan = _.throttle(() => {\n                // Enable reactivity by changing a Tracker.Dependency observer\n                component.validationObserver.changed();\n            }, 200);\n\n            // Change the validation function to focus the fields with error\n            const validateSelf = component.validate;\n            component.validate = () => {\n                // Call the original validation function\n                const validationResult = validateSelf();\n\n                // Change the form validated flag to true\n                component.isValidatedAlready = true;\n\n                // Focus the first error field if some validation failed\n                if (component.schema && component.schema._invalidKeys.length) {\n                    Tracker.afterFlush(() => instance.$('.state-error :input:first').focus());\n                }\n\n                return validationResult;\n            };\n        },\n\n        onRendered() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Set the component main and style elements\n            component.$style = component.$element = instance.$('form').first();\n\n            // Block page redirecting on submit\n            component.$element[0].onsubmit = () => false;\n        },\n\n        events: {\n            'click .validation-error-container a'(event, instance) {\n                // Get the target key\n                const targetKey = $(event.currentTarget).attr('data-target');\n\n                // Focus the first input inside the element with error state\n                instance.$(`.state-error[data-key=\"${targetKey}\"]`).find(':input:first').focus();\n            }\n        },\n\n        helpers: {\n            validationErrors() {\n                const instance = Template.instance();\n                const component = instance.component;\n\n                // Create a dependency on child components validation\n                component.validationObserver.depend();\n\n                // Stop here if no schema was defined for the form\n                if (!component.schema) {\n                    return;\n                }\n\n                // Check if there were some validation errors\n                if (component.schema._invalidKeys.length) {\n                    const result = [];\n\n                    // Iterate over each validation error and add to result\n                    component.schema._invalidKeys.forEach(item => {\n                        const label = component.schema._schema[item.name].label;\n                        let message = component.schema.keyErrorMessage(item.name);\n                        message = message.replace(label, `<strong>${label}</strong>`);\n                        result.push({\n                            key: item.name,\n                            message: Spacebars.SafeString(message)\n                        });\n                    });\n\n                    // Return the resulting validation errors\n                    return result;\n                }\n            }\n        }\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\nimport { Tracker } from 'meteor/tracker';\nimport { Meteor } from 'meteor/meteor';\nimport { _ } from 'meteor/underscore';\nimport { $ } from 'meteor/jquery';\n\n/*\n * formItem: create a generic controller for form items\n * It may be used to manage all components that belong to forms\n */\nOHIF.mixins.formItem = new OHIF.Mixin({\n    dependencies: 'schemaData',\n    composition: {\n\n        onCreated() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Create a observer to monitor changed values\n            component.changeObserver = new Tracker.Dependency();\n\n            // Register the component in the parent component\n            component.registerSelf();\n\n            // Declare the component elements that will be manipulated\n            component.$element = $();\n            component.$style = $();\n            component.$wrapper = $();\n\n            // Get or set the component's value using jQuery's val method\n            component.value = value => {\n                const isGet = _.isUndefined(value);\n                if (isGet) {\n                    return component.parseData(component.$element.val());\n                }\n\n                // Deferring the `change` event because it was being triggered before\n                // formItem.onMixins execution when a defaultValue was specified. In\n                // this case $elem.data('component') code from the event handler was\n                // returning `undefined` and breaking the app\n                Meteor.defer(() => {\n                    component.$element.val(value).trigger('change');\n                });\n            };\n\n            // Disable or enable the component\n            component.disable = isDisable => {\n                component.$element.prop('disabled', !!isDisable);\n            };\n\n            // Set or unset component's readonly property\n            component.readonly = isReadonly => {\n                component.$element.prop('readonly', !!isReadonly);\n            };\n\n            // Show or hide the component\n            component.show = isShow => {\n                const method = isShow ? 'show' : 'hide';\n                component.$wrapper[method]();\n            };\n\n            // Check if the focus is inside this element\n            component.hasFocus = () => {\n                // Get the focused element\n                const focused = $(':focus')[0];\n\n                // Check if the focused element is inside the component\n                const contains = $.contains(component.$wrapper[0], focused);\n                const isEqual = component.$wrapper[0] === focused;\n\n                // Return true if he component has the focus\n                return contains || isEqual;\n            };\n\n            // Add or remove a state from the component\n            component.state = (state, flag) => {\n                component.$wrapper.toggleClass(`state-${state}`, !!flag);\n            };\n\n            // Set the component in error state and display the error message\n            component.error = errorMessage => {\n                // Set the component error state\n                component.state('error', !!errorMessage);\n\n                // Set or remove the error message\n                if (errorMessage) {\n                    component.$wrapper.attr('data-error', errorMessage);\n                } else {\n                    component.$wrapper.removeAttr('data-error', errorMessage);\n                }\n            };\n\n            // Toggle the tooltip over the component\n            component.toggleTooltip = (isShow, message) => {\n                if (isShow && message) {\n                    const tooltipId = component.$wrapper.attr('aria-describedby');\n                    const $tooltip = $(document.getElementById(tooltipId));\n                    if ($tooltip.length) {\n                        // Change the message if the tooltip is already created\n                        $tooltip.find('.tooltip-inner').text(message);\n                    } else {\n                        // Destroy the tooltip if already created, creating it again\n                        component.$wrapper.tooltip('destroy').tooltip({\n                            trigger: 'manual',\n                            title: message\n                        }).tooltip('show');\n                    }\n                } else {\n                    // Destroy the tooltip\n                    component.$wrapper.tooltip('destroy');\n                }\n            };\n\n            // Toggle a state message as a tooltip over the component\n            component.toggleMessage = isShow => {\n                // Check if the action is to hide\n                if (!isShow) {\n                    Meteor.setTimeout(() => {\n                        // Check if the component has the focus\n                        if (component.hasFocus()) {\n                            // Prevent the tooltip from being hidden\n                            return;\n                        }\n\n                        // Hide the tooltip\n                        component.toggleTooltip(false);\n                    }, 100);\n                    return;\n                }\n\n                // Check for error state and message\n                const errorMessage = component.$wrapper.attr('data-error');\n                if (errorMessage) {\n                    // Show the tooltip with the error message\n                    component.toggleTooltip(true, errorMessage);\n                }\n            };\n\n            // Search for the parent form component\n            component.getForm = () => {\n                let currentComponent = component;\n                while (currentComponent) {\n                    currentComponent = currentComponent.parent;\n                    if (currentComponent && currentComponent.isForm) {\n                        return currentComponent;\n                    }\n                }\n            };\n\n            // Get the current component API\n            component.getApi = () => {\n                const api = instance.data.api;\n\n                // Check if the API was not given\n                if (!api) {\n                    // Stop here if the component is form and API was not given\n                    if (component.isForm) {\n                        return;\n                    }\n\n                    // Get the current component's form\n                    const form = component.getForm();\n\n                    // Stop here if the component has no form\n                    if (!form) {\n                        return;\n                    }\n\n                    return form.getApi();\n                }\n\n                // Return the given API\n                return api;\n            };\n\n            // Check if the component value is valid in its form's schema\n            component.validate = () => {\n                // Get the component's form\n                const form = component.getForm();\n\n                // Get the form's data schema\n                const schema = form && form.schema;\n\n                // Get the current component's key\n                const key = instance.data.pathKey;\n\n                // Return true if validation is not needed\n                if (!key || !schema || !component.$wrapper.is(':visible')) {\n                    return true;\n                }\n\n                // Create the data document for validation\n                const document = OHIF.object.getNestedObject({\n                    [key]: component.value()\n                });\n\n                // Get the validation result\n                const validationResult = schema.validateOne(document, key);\n\n                // Notify the form that the validation ran\n                form.validationRan();\n\n                // Check if the document validation failed\n                if (!validationResult) {\n                    // Set the component in error state and display the message\n                    component.error(schema.keyErrorMessage(key));\n\n                    // Return false for validation\n                    return false;\n                }\n\n                // Remove the component error state and message\n                component.error(false);\n\n                // Return true for validation\n                return true;\n            };\n\n            component.depend = () => {\n                return component.changeObserver.depend();\n            };\n\n            // Click the first submit (or first button if submit not found) button on closest form\n            component.triggerFormMainButton = () => {\n                const $form = component.$element.closest('form');\n                let $formButton = $form.find('button[type=submit]:first');\n                if (!$formButton.length) {\n                    $formButton = $form.find('button:first');\n                }\n\n                $formButton.click();\n            };\n\n        },\n\n        onRendered() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Set the element to be controlled\n            component.$element = instance.$(':input').first();\n\n            // Set the most outer wrapper element\n            component.$wrapper = instance.wrapper.$('*').first();\n\n            // Add the pathKey to the wrapper element\n            component.$wrapper.attr('data-key', instance.data.pathKey);\n\n            // Get the component's form\n            const form = component.getForm();\n\n            // Observer for changes and revalidate the component\n            instance.autorun(computation => {\n                component.changeObserver.depend();\n\n                // Stop here if it is the first run\n                if (computation.firstRun) return;\n\n                // Revalidate the component if form is already validated\n                if (form && form.isValidatedAlready) {\n                    component.validate();\n                }\n            });\n        },\n\n        onDestroyed() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Get the component's form for further use\n            const form = component.getForm();\n\n            // Unregister the component in the parent component\n            component.unregisterSelf();\n\n            // Remove the component tooltip, error state and message\n            component.error(false);\n            component.toggleTooltip(false);\n\n            // Revalidate the form to remove this component from validation results\n            if (form && form.isValidatedAlready) {\n                form.validate();\n            }\n        },\n\n        onMixins() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // If no style element was defined, set it as the element itself\n            if (!component.$style.length) {\n                component.$style = component.$element;\n            }\n\n            // Set the component in element and wrapper jQuery data\n            component.$element.data('component', component);\n            component.$wrapper.data('component', component);\n        },\n\n        events: {\n\n            // Handle the change event for the component\n            change(event, instance) {\n                const component = instance.component;\n\n                // Prevent execution on upper components\n                if (event.currentTarget === component.$element[0]) {\n                    // Enable reactivity by changing a Tracker.Dependency observer\n                    component.changeObserver.changed();\n                }\n            },\n\n            focus(event, instance) {\n                const component = instance.component;\n                const isGroupOrCustomFocus = component.isGroup || component.isCustomFocus;\n                const isSameTarget = event.target === event.currentTarget;\n                if (!isGroupOrCustomFocus && isSameTarget) {\n                    // Check for state messages and show it\n                    component.toggleMessage(true);\n                }\n            },\n\n            blur(event, instance) {\n                const component = instance.component;\n                const isGroupOrCustomFocus = component.isGroup || component.isCustomFocus;\n                const isSameTarget = event.target === event.currentTarget;\n                if (!isGroupOrCustomFocus && isSameTarget) {\n                    // Check for state messages and show it\n                    component.toggleMessage(false);\n                }\n            }\n\n        }\n\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { _ } from 'meteor/underscore';\n\n/*\n * group: controls a group and its registered items\n */\nOHIF.mixins.group = new OHIF.Mixin({\n    dependencies: 'formItem',\n    composition: {\n        onCreated() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Set the group identifier flag\n            component.isGroup = true;\n\n            // Run this computation every time the schema property is changed\n            instance.autorun(() => {\n                let schema = instance.data.schema;\n\n                // Check if the schema is reactive\n                if (schema instanceof ReactiveVar) {\n                    // Register a dependency on schema property\n                    schema = schema.get();\n                }\n\n                // Set the form's data schema\n                component.schema = schema && schema.newContext();\n            });\n\n            // Get or set the child components values\n            component.value = value => {\n                const isGet = _.isUndefined(value);\n                const isArray = instance.data.arrayValues;\n\n                // Create the result data as array or object\n                const result = isArray ? [] : {};\n\n                // Get the group current value and return it\n                if (isGet) {\n                    // Iterate over each registered item and extract its value\n                    component.registeredItems.forEach(child => {\n                        // Check if it is an array or an object group\n                        if (isArray) {\n                            // Get the mixins array\n                            const mixins = child.templateInstance.data.mixins.split(' ');\n\n                            // Prevent reading action components\n                            if (mixins.indexOf('action') > -1) return;\n\n                            // Push the item value to the result array\n                            result.push(child.value());\n                        } else {\n                            // Get the item key\n                            const key = child.templateInstance.data.key;\n\n                            //Check if a key is set for the item\n                            if (key) {\n                                // Add the item value to the result object\n                                result[key] = child.value();\n                            }\n                        }\n                    });\n\n                    // Return the resulting data as array or object\n                    return result;\n                }\n\n                // Get the group current value\n                const groupValue = typeof value === 'object' ? value : result;\n\n                // Stop here if there is no value defined for this group\n                if (!groupValue) {\n                    return;\n                }\n\n                // Iterate over each registered item and set its value\n                let i = 0;\n                component.registeredItems.forEach(child => {\n                    const mixins = child.templateInstance.data.mixins.split(' ');\n\n                    // Prevent reading action components\n                    if (isArray && mixins.indexOf('action') > -1) return;\n\n                    const key = isArray ? i : child.templateInstance.data.key;\n                    const childValue = _.isUndefined(groupValue[key]) ? null : groupValue[key];\n                    child.value(childValue);\n                    i++;\n                });\n\n                // Trigger the change event after setting the new value\n                component.$element.trigger('change');\n            };\n\n            // Get a registered item in form by its key\n            component.item = itemKey => {\n                let found;\n\n                // Iterate over each registered form item\n                component.registeredItems.forEach(child => {\n                    const key = child.templateInstance.data.key;\n\n                    // Change the found item if current key is the same as given\n                    if (key === itemKey) {\n                        found = child;\n                    }\n                });\n\n                // Return the found item or undefined if it was not found\n                return found;\n            };\n\n            // Check if the form data is valid in its schema\n            const validateSelf = component.validate;\n            component.validate = () => {\n                // Assume validation result as true\n                let result = true;\n\n                // Return true if there's no data schema defined\n                if (component.isForm && !component.schema) {\n                    return result;\n                }\n\n                // Reset the validation\n                const schema = component.isForm ? component.schema : component.getForm().schema;\n                schema.resetValidation();\n\n                // Validate the component itself if it has a key\n                if (instance.data.pathKey && !validateSelf()) {\n                    result = false;\n                }\n\n                // Iterate over each registered form item and validate it\n                component.registeredItems.forEach(child => {\n                    const key = child.templateInstance.data.key;\n\n                    // Change result to false if any form item is invalid\n                    if ((key || instance.data.arrayValues) && !child.validate()) {\n                        result = false;\n                    }\n                });\n\n                // Return the validation result\n                return result;\n            };\n\n            // Disable or enable the component\n            component.disable = isDisable => {\n                component.registeredItems.forEach(child => child.disable(isDisable));\n            };\n\n            // Set or unset component's readonly property\n            component.readonly = isReadonly => {\n                component.registeredItems.forEach(child => child.readonly(isReadonly));\n            };\n\n        },\n\n        onRendered() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Set the element to be controlled\n            component.$element = instance.$('.component-group').first();\n        }\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\nimport { _ } from 'meteor/underscore';\nimport { $ } from 'meteor/jquery';\n\n/*\n * groupRadio: controls all the radio inputs inside the group\n */\nOHIF.mixins.groupRadio = new OHIF.Mixin({\n    dependencies: 'group',\n    composition: {\n\n        onCreated() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Get the selected radio's value or select a radio based on value\n            component.value = value => {\n                const isGet = _.isUndefined(value);\n                const elements = [];\n                component.registeredItems.forEach(child => elements.push(child.$element[0]));\n                const $elements = $(elements);\n                if (isGet) {\n                    return component.parseData($elements.filter(':checked').val());\n                }\n\n                $elements.filter(`[value='${value}']`).prop('checked', true).trigger('change');\n            };\n        }\n\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\n\n/*\n * input: controls a basic input\n */\nOHIF.mixins.input = new OHIF.Mixin({\n    dependencies: 'formItem',\n    composition: {\n        onRendered() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Set the element to be controlled\n            component.$element = instance.$('input').first();\n        }\n    }\n});\n","import { Template } from 'meteor/templating';\nimport { OHIF } from 'meteor/ohif:core';\n\n/*\n * link: controls a link\n */\nOHIF.mixins.link = new OHIF.Mixin({\n    dependencies: 'formItem',\n    composition: {\n        onRendered() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Set the element to be controlled\n            component.$element = instance.$('a').first();\n        },\n\n        events: {\n            'click a'(event, instance) {\n                if (instance.data.action) {\n                    event.preventDefault();\n                }\n            }\n        }\n    }\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { $ } from 'meteor/jquery';\nimport { OHIF } from 'meteor/ohif:core';\n\n/*\n * popover: controls a popover\n */\nOHIF.mixins.popover = new OHIF.Mixin({\n    dependencies: 'form',\n    composition: {\n        onRendered() {\n            const instance = Template.instance();\n            instance.$form = instance.$('form').first();\n            instance.$form.find(':input:first').focus();\n        },\n\n        events: {\n            'blur form'(event, instance) {\n                Meteor.defer(() => {\n                    const $focus = $(':focus');\n                    if (!$.contains(instance.$form[0], $focus[0])) {\n                        instance.data.promiseReject();\n                    }\n                });\n            },\n\n            'click .btn-cancel'(event, instance) {\n                event.stopPropagation();\n                instance.data.promiseReject();\n            },\n\n            'click .btn-confirm'(event, instance) {\n                event.stopPropagation();\n                const form = instance.$('form').data('component');\n                instance.data.promiseResolve(form.value());\n            }\n        }\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { _ } from 'meteor/underscore';\n\n// Helper function to get the component's current schema\nconst getCurrentSchemaDefs = (parentComponent, key) => {\n    // Get the parent component schema\n    let schema = parentComponent && parentComponent.schema;\n    let schemaComponentHolder = parentComponent;\n\n    // Try to get the form schema if it was not found\n    if (parentComponent && !schema) {\n        const form = parentComponent.getForm();\n        schema = form && form.schema;\n        schemaComponentHolder = form;\n    }\n\n    // Stop here if there's no key or schema defined\n    if (!key || !schema) {\n        return { schemaComponentHolder };\n    }\n\n    // Get the current schema data using component's key\n    const currentSchema = _.clone(schema._schema[key]);\n\n    // Stop here if no schema was found for the given key\n    if (!currentSchema) {\n        return { schemaComponentHolder };\n    }\n\n    // Merge the sub-schema properties if it's an array\n    if (Array.isArray(currentSchema.type())) {\n        _.extend(currentSchema, schema._schema[key + '.$']);\n    }\n\n    // Return the component's schema definitions\n    return {\n        currentSchema,\n        schemaComponentHolder\n    };\n};\n\n/*\n * schemaData: change the component data based on its form's schema data\n */\nOHIF.mixins.schemaData = new OHIF.Mixin({\n    dependencies: 'component',\n    composition: {\n\n        onData() {\n            // Get the current template data\n            const data = Template.currentData();\n\n            // Get the parent component\n            const parent = OHIF.blaze.getParentComponent(Blaze.currentView);\n\n            // Get he parent component key\n            const parentKey = parent && parent.templateInstance.data.pathKey;\n\n            // Check if the parent is an array group\n            const isParentArray = parent && parent.templateInstance.data.arrayValues;\n\n            // Set the path key for this component\n            data.pathKey = data.key || (isParentArray ? '$' : '');\n            if (data.pathKey && typeof parentKey === 'string') {\n                const prefix = parentKey ? `${parentKey}.` : '';\n                data.pathKey = `${prefix}${data.pathKey}`;\n            }\n\n            // Get the current schema data using component's key\n            const { currentSchema } = getCurrentSchemaDefs(parent, data.pathKey);\n\n            // Stop here if there's no schema data for current key\n            if (!currentSchema) {\n                return;\n            }\n\n            // Use schema's label if it was not defined\n            if (!data.label) {\n                data.label = new ReactiveVar(currentSchema.label);\n            }\n\n            // Set the min value\n            if (_.isUndefined(data.min) && currentSchema.min) {\n                data.min = currentSchema.min;\n            }\n\n            // Set the max value\n            if (_.isUndefined(data.max) && currentSchema.max) {\n                data.max = currentSchema.max;\n            }\n\n            // Set the emptyOption data attribute if given on schema\n            if (currentSchema.emptyOption) {\n                data.emptyOption = currentSchema.emptyOption;\n            }\n\n            // Fill the items if it's an array schema\n            if (!data.items && Array.isArray(currentSchema.allowedValues)) {\n                data.items = data.items instanceof ReactiveVar ? data.items : new ReactiveVar();\n\n                Tracker.autorun(() => {\n                    const schemaDefs = getCurrentSchemaDefs(parent, data.pathKey);\n\n                    // Check if schema is reactive and add reactivity to this function if so\n                    const componentHolder = schemaDefs.schemaComponentHolder;\n                    if (componentHolder.templateInstance.data.schema instanceof ReactiveVar) {\n                        componentHolder.templateInstance.data.schema.dep.depend();\n                    }\n\n                    // Get the values and labels arrays from schema\n                    const values = schemaDefs.currentSchema.allowedValues;\n                    const labels = schemaDefs.currentSchema.valuesLabels || [];\n\n                    // Initialize the items array\n                    const items = [];\n\n                    // Iterate the allowed values array\n                    for (let i = 0; i < values.length; i++) {\n                        // Push the current item to the items array\n                        items.push({\n                            value: values[i],\n                            label: labels[i] || values[i]\n                        });\n                    }\n\n                    // Add the items to a reactive instance\n                    data.items.set(items);\n                });\n            }\n        },\n\n        onCreated() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Create a data parser according to current schema key\n            component.parseData = value => {\n                // Get the current schema data using component's key\n                const { currentSchema } = getCurrentSchemaDefs(component.parent, instance.data.pathKey);\n                const { dataType } = instance.data;\n\n                // Stop here if there's no schema data for current key or no dataType defined\n                if (!currentSchema && !dataType) {\n                    return value;\n                }\n\n                // Get the schema type\n                const schemaType = currentSchema && currentSchema.type;\n\n                // Check if the type is Number\n                if (schemaType === Number || dataType === 'Number') {\n                    return parseFloat(value);\n                }\n\n                // Check if the type is Boolean\n                if (schemaType === Boolean || dataType === 'Boolean') {\n                    return !!value;\n                }\n\n                // Return the original value if none of the checks matched\n                return value;\n            };\n        },\n\n        onMixins() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Get the current schema data using component's key\n            const { currentSchema } = getCurrentSchemaDefs(component.parent, instance.data.pathKey);\n\n            // Stop here if there's no schema data for current key\n            if (!currentSchema) {\n                return;\n            }\n\n            // Fill the component with its default value after rendering\n            if (!_.isUndefined(currentSchema.defaultValue)) {\n                component.defaultValue = currentSchema.defaultValue;\n                component.value(currentSchema.defaultValue);\n            }\n        }\n\n    }\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\n\n/*\n * input: controls a basic select\n */\nOHIF.mixins.select = new OHIF.Mixin({\n    dependencies: 'formItem',\n    composition: {\n        onRendered() {\n            const instance = Template.instance();\n            const component = instance.component;\n\n            // Set the element to be controlled\n            component.$element = instance.$('select').first();\n        }\n    }\n});\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { _ } from 'meteor/underscore';\nimport { $ } from 'meteor/jquery';\nimport { OHIF } from 'meteor/ohif:core';\n\n/*\n * input: controls a select2 component\n */\nOHIF.mixins.select2 = new OHIF.Mixin({\n    dependencies: 'select',\n    composition: {\n        onCreated() {\n            const instance = Template.instance();\n            const { component, data } = instance;\n\n            // Controls select2 initialization\n            instance.isInitialized = false;\n\n            // Set the custom focus flag\n            component.isCustomFocus = true;\n\n            const valueMethod = component.value;\n            component.value = value => {\n                if (_.isUndefined(value) && !instance.isInitialized) {\n                    if (!_.isUndefined(instance.data.value)) return instance.data.value;\n                    if (!_.isUndefined(component.defaultValue)) return component.defaultValue;\n                    return;\n                }\n\n                return valueMethod(value);\n            };\n\n            // Utility function to get the dropdown jQuery element\n            instance.getDropdownContainerElement = () => {\n                const $select2 = component.$element.nextAll('.select2:first');\n                const containerId = $select2.find('.select2-selection').attr('aria-owns');\n                return $(`#${containerId}`).closest('.select2-container');\n            };\n\n            // Check if this select will include a placeholder\n            const placeholder = data.options && data.options.placeholder;\n            if (placeholder) {\n                instance.autorun(() => {\n                    // Get the option items\n                    let items = data.items;\n\n                    // Check if the items are reactive and get them if true\n                    const isReactive = items instanceof ReactiveVar;\n                    if (isReactive) {\n                        items = items.get();\n                    }\n\n                    // Check if there is already an empty option on items list\n                    if (!_.findWhere(items, { value: '' })) {\n                        // Clone the current items\n                        const newItems = _.clone(items) || [];\n                        newItems.unshift({\n                            label: placeholder,\n                            value: ''\n                        });\n\n                        // Set the new items list including the empty option\n                        if (isReactive) {\n                            data.items.set(newItems);\n                        } else {\n                            data.items = newItems;\n                        }\n                    }\n                });\n            }\n        },\n\n        onRendered() {\n            const instance = Template.instance();\n            const { component, data } = instance;\n\n            // Destroy and re-create the select2 instance\n            instance.rebuildSelect2 = () => {\n                // Destroy the select2 instance if exists and re-create it\n                if (component.select2Instance) {\n                    component.select2Instance.destroy();\n                }\n\n                // Clone the options and check if the select2 should be initialized inside a modal\n                const options = _.clone(data.options);\n                const $closestModal = component.$element.closest('.modal');\n                if ($closestModal.length) {\n                    options.dropdownParent = $closestModal;\n                }\n\n                // Apply the select2 to the component\n                component.$element.select2(options);\n\n                // Store the select2 instance to allow its further destruction\n                component.select2Instance = component.$element.data('select2');\n\n                // Get the focusable elements\n                const elements = [];\n                const $select2 = component.$element.nextAll('.select2:first');\n                elements.push(component.$element[0]);\n                elements.push($select2.find('.select2-selection')[0]);\n\n                // Attach focus and blur handlers to focusable elements\n                $(elements).on('focus', event => {\n                    instance.isFocused = true;\n                    if (event.target === event.currentTarget) {\n                        // Show the state message on elements focus\n                        component.toggleMessage(true);\n                    }\n                }).on('blur', event => {\n                    instance.isFocused = false;\n                    if (event.target === event.currentTarget) {\n                        // Hide the state message on elements blur\n                        component.toggleMessage(false);\n                    }\n                });\n\n                // Redirect keydown events from input to the select2 selection handler\n                component.$element.on('keydown ', event => {\n                    event.preventDefault();\n                    $select2.find('.select2-selection').trigger(event);\n                });\n\n                // Keep focus on element if ESC was pressed\n                $select2.on('keydown ', event => {\n                    if (event.which === 27) {\n                        instance.component.$element.focus();\n                    }\n                });\n\n                // Set select2 as initialized\n                instance.isInitialized = true;\n            };\n\n            instance.autorun(() => {\n                // Run this computation every time the reactive items suffer any changes\n                const isReactive = data.items instanceof ReactiveVar;\n                if (isReactive) {\n                    data.items.dep.depend();\n                }\n\n                if (isReactive) {\n                    // Keep the current value of the component\n                    const currentValue = component.value();\n                    const wasFocused = instance.isFocused;\n\n                    Tracker.afterFlush(() => {\n                        component.$element.val(currentValue);\n                        instance.rebuildSelect2();\n\n                        if (wasFocused) {\n                            component.$element.focus();\n                        }\n                    });\n                } else {\n                    instance.rebuildSelect2();\n                }\n            });\n        },\n\n        events: {\n            // Focus element when selecting a value\n            'select2:select'(event, instance) {\n                instance.component.$element.focus();\n            },\n\n            // Focus the element when closing the dropdown container using ESC key\n            'select2:open'(event, instance) {\n                const { minimumResultsForSearch } = instance.data.options;\n                if (minimumResultsForSearch === Infinity || minimumResultsForSearch === -1) return;\n                const $container = instance.getDropdownContainerElement();\n\n                if (!instance.data.wrapText) {\n                    $container.addClass('select2-container-nowrap');\n                }\n\n                const $searchInput = $container.find('.select2-search__field');\n                $searchInput.on('keydown.focusOnEsc', event => {\n                    if (event.which === 27) {\n                        $searchInput.off('keydown.focusOnEsc');\n                        instance.component.$element.focus();\n                    }\n                });\n            }\n        },\n\n        onDestroyed() {\n            const instance = Template.instance();\n            const { component } = instance;\n\n            // Destroy the select2 instance to remove unwanted DOM elements\n            if (component.select2Instance) {\n                component.select2Instance.destroy();\n            }\n        }\n    }\n});\n","import { Template } from 'meteor/templating';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { OHIF } from 'meteor/ohif:core';\n\nTemplate.section.onCreated(() => {\n    const instance = Template.instance();\n\n    // Create the render function and section data as reactive objects\n    instance.renderFunction = new ReactiveVar(null);\n    instance.sectionData = new ReactiveVar(null);\n\n    // Get the section name\n    const sectionName = instance.data;\n\n    // Stop here if no section name was defined\n    if (!sectionName) {\n        return;\n    }\n\n    // Get the content block\n    const templateContentBlock = instance.view.templateContentBlock;\n\n    // Get the parent template view of this section block\n    let currentView = OHIF.blaze.getParentTemplateView(instance.view);\n\n    // Check if it is defining or printing the section content\n    if (templateContentBlock) {\n        // Define a section map for template's view if none was yet set\n        if (!currentView._sectionMap) {\n            currentView._sectionMap = new Map();\n        }\n\n        // Define the content\n        currentView._sectionMap.set(sectionName, {\n            data: Object.assign({}, currentView._templateInstance.data),\n            renderFunction: templateContentBlock.renderFunction\n        });\n    } else {\n        // Wait for re-rendering and print the section content\n        Tracker.afterFlush(() => {\n            // Get the defined section's content\n            const section = OHIF.blaze.getSectionContent(currentView, sectionName);\n\n            // Stop here if the section content is not defined\n            if (!section) {\n                return;\n            }\n\n            // Set the section data on its respective reactive object\n            instance.sectionData.set(section.data);\n\n            // Set the render function on its respective reactive object\n            instance.renderFunction.set(new Template(section.renderFunction));\n        });\n    }\n});\n\nTemplate.registerHelper('hasSection', sectionName => {\n    return !!OHIF.blaze.getSectionContent(Template.instance().view, sectionName);\n});\n","import './dialog/confirm.html';\nimport './dialog/form.html';\nimport './dialog/form.js';\nimport './dialog/header.html';\nimport './dialog/info.html';\nimport './dialog/info.js';\nimport './dialog/loading.html';\nimport './dialog/loading.js';\nimport './dialog/login.html';\nimport './dialog/login.js';\nimport './dialog/progress.html';\nimport './dialog/progress.js';\nimport './dialog/simple.html';\nimport './dialog/simple.js';\nimport './dialog/unsavedChangesDialog.html';\nimport './dialog/unsavedChangesDialog.js';\n\nimport './dropdown/form.html';\nimport './dropdown/form.js';\n\nimport './form/button.html';\nimport './form/form.html';\nimport './form/group.html';\nimport './form/link.html';\n\nimport './input/checkbox.html';\nimport './input/hidden.html';\nimport './input/groupRadio.html';\nimport './input/number.html';\nimport './input/password.html';\nimport './input/radio.html';\nimport './input/range.html';\nimport './input/select.html';\nimport './input/text.html';\n\nimport './notification';\n\nimport './popover/form.html';\n","import { Template } from 'meteor/templating';\nimport { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\nTemplate.dialogForm.onCreated(() => {\n    const instance = Template.instance();\n\n    const dismissModal = (promiseFunction, param) => {\n        // Hide the modal, removing the backdrop\n        instance.$('.modal').one('hidden.bs.modal', event => {\n            // Resolve or reject the promise with the given parameter\n            promiseFunction(param);\n        }).modal('hide');\n    };\n\n    instance.api = {\n\n        confirm() {\n            // Check if the form has valid data\n            const form = instance.$('form').data('component');\n            if (!form.validate()) {\n                return;\n            }\n\n            const formData = form.value();\n            const dismiss = param => dismissModal(instance.data.promiseResolve, param);\n\n            if (_.isFunction(instance.data.confirmCallback)) {\n                const result = instance.data.confirmCallback(formData);\n                if (result instanceof Promise) {\n                    return result.then(dismiss);\n                } else {\n                    return dismiss(result);\n                }\n            }\n\n            dismiss(formData);\n        },\n\n        cancel() {\n            const dismiss = param => dismissModal(instance.data.promiseReject, param);\n\n            if (_.isFunction(instance.data.cancelCallback)) {\n                const result = instance.data.cancelCallback();\n                if (result instanceof Promise) {\n                    return result.then(dismiss);\n                } else {\n                    return dismiss(result);\n                }\n            }\n\n            dismiss();\n        }\n\n    };\n});\n\nTemplate.dialogForm.onRendered(() => {\n    const instance = Template.instance();\n\n    // Allow options ovewrite\n    const modalOptions = _.extend({\n        backdrop: 'static',\n        keyboard: false\n    }, instance.data.modalOptions);\n\n    const $modal = instance.$('.modal');\n\n    // Create the bootstrap modal\n    $modal.modal(modalOptions);\n\n    // Check if dialog will be repositioned\n    let position = instance.data.position;\n    const event = instance.data.event;\n    if (!position && event && event.clientX) {\n        position = {\n            x: event.clientX,\n            y: event.clientY\n        };\n    }\n\n    // Reposition dialog if position object was filled\n    if (position) {\n        OHIF.ui.repositionDialog($modal, position.x, position.y);\n    }\n});\n\nTemplate.dialogForm.events({\n    keydown(event) {\n        const instance = Template.instance(),\n              keyCode = event.keyCode || event.which;\n\n        let handled = false;\n\n        if (keyCode === 27) {\n            instance.$('.btn.btn-cancel').click();\n            handled = true;\n        } else if (keyCode === 13) {\n            instance.$('.btn.btn-confirm').click();\n            handled = true;\n        }\n\n        if (handled) {\n            event.stopPropagation();\n        }\n    }\n});\n\nTemplate.dialogForm.helpers({\n    isError() {\n        const data = Template.instance().data;\n        return data instanceof Error || (data && data.error instanceof Error);\n    }\n});\n","import { Template } from 'meteor/templating';\n\nTemplate.dialogInfo.onRendered(() => {\n    const instance = Template.instance();\n\n    const $modal = instance.$('.modal');\n\n    $modal.one('hidden.bs.modal', () => instance.data.promiseResolve());\n});\n\nTemplate.dialogInfo.helpers({\n    isError() {\n        const data = Template.instance().data;\n        return data instanceof Error || (data && data.error instanceof Error);\n    }\n});\n","import { Template } from 'meteor/templating';\n\nTemplate.dialogLoading.onRendered(() => {\n    const instance = Template.instance();\n\n    const $modal = instance.$('.modal');\n\n    // Create the bootstrap modal\n    $modal.modal({\n        backdrop: 'static',\n        keyboard: false,\n        show: true\n    });\n});\n","import { Template } from 'meteor/templating';\nimport { SimpleSchema } from 'meteor/aldeed:simple-schema';\n\nTemplate.dialogLogin.onCreated(() => {\n    const instance = Template.instance();\n\n    instance.schema = new SimpleSchema({\n        username: {\n            type: String,\n            label: 'Username'\n        },\n        password: {\n            type: String,\n            label: 'Password'\n        }\n    });\n});\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { _ } from 'meteor/underscore';\n\nTemplate.dialogProgress.onCreated(() => {\n    const instance = Template.instance();\n\n    instance.state = new ReactiveVar({\n        processed: 0,\n        total: instance.data.total,\n        message: instance.data.message\n    });\n});\n\nTemplate.dialogProgress.onRendered(() => {\n    const instance = Template.instance();\n    const task = instance.data.task;\n\n    const progressDialog = {\n        promise: instance.data.promise,\n\n        done: value => {\n            // Hide the modal, removing the backdrop\n            instance.$('.modal').on('hidden.bs.modal', event => {\n                instance.data.promiseResolve(value);\n            }).modal('hide');\n        },\n\n        cancel: () => {\n            // Hide the modal, removing the backdrop\n            instance.$('.modal').on('hidden.bs.modal', event => {\n                instance.data.promiseReject();\n            }).modal('hide');\n        },\n\n        update: _.throttle(processed => {\n            const state = instance.state.get();\n            state.processed = Math.max(0, processed);\n\n            instance.state.set(state);\n        }, 100),\n\n        setTotal: _.throttle(total => {\n            const state = instance.state.get();\n            state.total = total;\n\n            instance.state.set(state);\n        }, 100),\n\n        setMessage: _.throttle(message => {\n            const state = instance.state.get();\n            state.message = message;\n\n            instance.state.set(state);\n        }, 100)\n    };\n\n    task.run(progressDialog);\n});\n\nTemplate.dialogProgress.helpers({\n    progress() {\n        const instance = Template.instance();\n        const state = instance.state.get();\n\n        if (!state || !state.total) {\n            return 0;\n        }\n\n        return Math.min(1, state.processed / state.total) * 100;\n    },\n\n    message() {\n        const instance = Template.instance();\n        const state = instance.state.get();\n\n        if (!state) {\n            return;\n        }\n\n        if (typeof state.message === 'function') {\n            return state.message(state);\n        }\n\n        return state.message;\n    }\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\nTemplate.dialogSimple.onCreated(() => {\n    const instance = Template.instance();\n\n    instance.close = () => {\n        const $modal = instance.$('.modal');\n        $modal.one('hidden.bs.modal', () => instance.data.promiseResolve()).modal('hide');\n    };\n\n    // Automatically close the modal if a timeout value was given\n    if (instance.data.timeout) {\n        Meteor.setTimeout(instance.close, instance.data.timeout);\n    }\n});\n\nTemplate.dialogSimple.onRendered(() => {\n    const instance = Template.instance();\n\n    // Allow options ovewrite\n    const modalOptions = _.extend({\n        backdrop: 'static',\n        keyboard: false\n    }, instance.data.modalOptions);\n\n    const $modal = instance.$('.modal');\n\n    // Create the bootstrap modal\n    $modal.modal(modalOptions);\n\n    let position = instance.data.position;\n\n    const { event } = instance.data;\n    if (!position && event && !_.isUndefined(event.clientX)) {\n        position = {\n            x: event.clientX,\n            y: event.clientY\n        };\n    }\n\n    if (position) {\n        OHIF.ui.repositionDialog($modal, position.x, position.y);\n    }\n});\n\nTemplate.dialogSimple.events({\n    keydown(event) {\n        const instance = Template.instance();\n        const keyCode = event.keyCode || event.which;\n\n        if (keyCode === 27) {\n            instance.close();\n            event.stopPropagation();\n        }\n    }\n});\n","import { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport { _ } from 'meteor/underscore';\nimport { $ } from 'meteor/jquery';\n\nconst MARGIN_RIGHT = 15;\nconst MARGIN_BOTTOM = 15;\n\nTemplate.unsavedChangesDialog.onRendered(function() {\n\n    const instance = Template.instance();\n    const $modal = instance.$('.modal.unsavedChangesDialog');\n\n    // Routine which effectively displays the BS modal...\n    instance.displayModal = () => {\n\n        // Make modal options extensible...\n        const modalOptions = _.extend({\n            backdrop: 'static',\n            keyboard: false\n        }, instance.data.modalOptions);\n\n        // Set handler for \"hidden\" event... Simply remove the view!\n        $modal.one('hidden.bs.modal', () => {\n            Blaze.remove(instance.view);\n        });\n\n        // Create the bootstrap modal\n        $modal.modal(modalOptions);\n\n    };\n\n    // Routine which repositions the modal before display...\n    instance.displayModalWithPosition = (position) => {\n\n        // Preserve original CSS rules...\n        const origCSS = {\n            display: $modal.css('display'),\n            visibility: $modal.css('visibility')\n        };\n\n        // Make sure modal is propperly rendered before proceeding with math...\n        if (origCSS.display === 'none') {\n            $modal.css({\n                visibility: 'hidden',\n                display: 'block'\n            });\n        }\n\n        // Run presentation code on next tick...\n        setTimeout(() => {\n\n            let dimension;\n            const $dialog = $modal.find('.modal-dialog');\n\n            const dialogRect = {\n                position: {\n                    x: parseInt(position.x) || 0,\n                    y: parseInt(position.y) || 0\n                },\n                size: {\n                    width: $dialog.outerWidth(),\n                    height: $dialog.outerHeight()\n                }\n            };\n\n            const modalSize = {\n                width: $modal.width(),\n                height: $modal.height()\n            };\n\n            dimension = dialogRect.position.x + dialogRect.size.width + MARGIN_RIGHT;\n            if (dimension > modalSize.width) {\n                dialogRect.position.x -= dimension - modalSize.width;\n            }\n\n            if (dialogRect.position.x < 0) {\n                dialogRect.position.x = 0;\n            }\n\n            dimension = dialogRect.position.y + dialogRect.size.height + MARGIN_BOTTOM;\n            if (dimension > modalSize.height) {\n                dialogRect.position.y -= dimension - modalSize.height;\n            }\n\n            if (dialogRect.position.y < 0) {\n                dialogRect.position.y = 0;\n            }\n\n            // Restore original CSS...\n            $modal.css(origCSS);\n\n            // Set new position...\n            $dialog.css({\n                position: 'fixed',\n                margin: 0,\n                left: dialogRect.position.x,\n                top: dialogRect.position.y\n            });\n\n            instance.displayModal();\n\n        }, 0);\n\n    };\n\n    // Check if modal will be presented with custom positioning...\n    let position = instance.data.position;\n    if (position && 'x' in position && 'y' in position) {\n        instance.displayModalWithPosition(position);\n    } else {\n        instance.displayModal();\n    }\n\n});\n\nTemplate.unsavedChangesDialog.events({\n\n    'click button[data-choice]'(event) {\n\n        const instance = Template.instance();\n        const callback = instance.data.callback;\n        const choice = $(event.currentTarget).attr('data-choice') || '';\n\n        // if callback is a function, call it passing user choice...\n        if (typeof callback === 'function') {\n            callback.call(instance, choice);\n        }\n\n    }\n\n});\n","import { Template } from 'meteor/templating';\n\nTemplate.dropdownFormMenu.helpers({\n    isVisible(item) {\n        let isVisible = true;\n        if (typeof item.visible === 'function') {\n            isVisible = item.visible();\n        } else if (typeof item.visible !== 'undefined') {\n            isVisible = !!item.visible;\n        }\n\n        return isVisible;\n    },\n\n    getText(item) {\n        if (typeof item.text === 'function') {\n            return item.text(item.params || {});\n        }\n\n        return item.text || '';\n    }\n});\n","import './notification.styl';\nimport './notificationNote.html';\nimport './notificationNote.js';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { OHIF } from 'meteor/ohif:core';\n\nTemplate.notificationNote.onRendered(() => {\n    const instance = Template.instance();\n    Meteor.setTimeout(() => {\n        const $note = instance.$('.notification-note');\n        $note.css('max-height', $note.outerHeight()).addClass('in');\n    }, 100);\n});\n\nTemplate.notificationNote.events({\n    'click .note-dismiss'(event, instance) {\n        if (instance.data.promiseResolve) {\n            instance.data.promiseResolve();\n        } else {\n            OHIF.ui.notifications.dismiss(instance.data.id);\n        }\n    }\n});\n","import './error';\nimport './message';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nTemplate.pageError.helpers({\n    shallDisplayErrorStack() {\n        return Meteor.isDevelopment;\n    },\n\n    getDefaultErrorMessage() {\n        const instance = Template.instance();\n        return instance.view.templateContentBlock ? '' : 'An error has ocurred.';\n    }\n});\n","import './error.html';\nimport './error.js';\nimport './error.styl';\n","import './message.html';\nimport './message.styl';\n","import './paginationArea.html';\nimport './paginationArea.js';\nimport './paginationArea.styl';\n","import { Template } from 'meteor/templating';\nimport { SimpleSchema } from 'meteor/aldeed:simple-schema';\nimport 'twbs-pagination';\n\nconst visiblePages = 10;\n\nTemplate.paginationArea.onCreated(function() {\n    const instance = Template.instance();\n\n    // Create the rowsPerPage schema\n    instance.schema = new SimpleSchema({\n        rowsPerPage: {\n            type: Number,\n            allowedValues: [25, 50, 100],\n            defaultValue: 25\n        }\n    });\n});\n\nTemplate.paginationArea.onRendered(() => {\n    const instance = Template.instance();\n    instance.$paginationControl = instance.$('.pagination-control');\n\n    // Track changes on recordCount and rowsPerPage\n    instance.autorun(() => {\n        const recordCount = instance.data.recordCount.get();\n        const rowsPerPage = instance.data.rowsPerPage.get();\n\n        // Destroy plugin if exists\n        if (instance.$paginationControl.data().twbsPagination) {\n            instance.$paginationControl.twbsPagination('destroy');\n        }\n\n        if (recordCount && rowsPerPage) {\n            const totalPages = Math.ceil(recordCount / rowsPerPage);\n\n            // Initialize plugin\n            instance.$paginationControl.twbsPagination({\n                totalPages,\n                visiblePages,\n                onPageClick: (event, page) => {\n                    // Update currentPage\n                    // Decrease page by 1 to set currentPage\n                    // Since reactive table current page index starts by 0\n                    instance.data.currentPage.set(page - 1);\n                }\n            });\n        }\n    });\n});\n\nTemplate.paginationArea.onDestroyed(() => {\n    const instance = Template.instance();\n    if (instance.$paginationControl.data().twbsPagination) {\n        instance.$paginationControl.twbsPagination('destroy');\n    }\n});\n\nTemplate.paginationArea.helpers({\n    recordCount() {\n        const instance = Template.instance();\n        return instance.data.recordCount.get();\n    },\n\n    isRowsPerPageSelected(rowsPerPage) {\n        const instance = Template.instance();\n        return rowsPerPage === instance.data.rowsPerPage.get();\n    }\n});\n\nTemplate.paginationArea.events({\n    'change [data-key=rowsPerPage]'(event, instance) {\n        const rowsPerPage = $(event.currentTarget).data('component').value();\n\n        // Update rowsPerPage\n        instance.data.rowsPerPage.set(parseInt(rowsPerPage, 10));\n    }\n});\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { OHIF } from 'meteor/ohif:core';\n\nOHIF.ui.layoutState = {\n    leftSidebar: new ReactiveVar(false),\n    rightSidebar: new ReactiveVar(false),\n    toolsDrawer: new ReactiveVar(false)\n};\n\nTemplate.componentPlayground.onRendered(() => {\n    const instance = Template.instance();\n\n    instance.$('.toolbar-drawer').adjustMax('height');\n    instance.autorun(() => {\n        const state = OHIF.ui.layoutState.toolsDrawer.get();\n        instance.$('.toolbar-drawer').toggleClass('open', state);\n    });\n\n    instance.$('.layout-sidebar-left').adjustMax('width');\n    instance.autorun(() => {\n        const state = OHIF.ui.layoutState.leftSidebar.get();\n        instance.$('.layout-sidebar-left').toggleClass('open', state);\n    });\n\n    instance.$('.layout-sidebar-right').adjustMax('width');\n    instance.autorun(() => {\n        const state = OHIF.ui.layoutState.rightSidebar.get();\n        instance.$('.layout-sidebar-right').toggleClass('open', state);\n    });\n});\n\nTemplate.componentPlayground.events({\n    'click .js-tool-more'(event, instance) {\n        const currentState = OHIF.ui.layoutState.toolsDrawer.get();\n        OHIF.ui.layoutState.toolsDrawer.set(!currentState);\n    },\n    'click .js-toggle-left'(event, instance) {\n        const currentState = OHIF.ui.layoutState.leftSidebar.get();\n        OHIF.ui.layoutState.leftSidebar.set(!currentState);\n    },\n    'click .js-toggle-right'(event, instance) {\n        const currentState = OHIF.ui.layoutState.rightSidebar.get();\n        OHIF.ui.layoutState.rightSidebar.set(!currentState);\n    }\n});\n","import './scrollArea.html';\nimport './scrollArea.js';\nimport './scrollArea.styl';\n","import { Template } from 'meteor/templating';\nimport { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\nTemplate.scrollArea.onCreated(() => {\n    const instance = Template.instance();\n    const { data } = instance;\n    const defaultConfig = {\n        hideScrollbar: true,\n        scrollY: true,\n        scrollX: false,\n        scrollStep: 100\n    };\n\n    instance.config = _.defaults(data || {}, defaultConfig);\n});\n\nTemplate.scrollArea.onRendered(() => {\n    const instance = Template.instance();\n\n    instance.adjustMargins = _.throttle(() => {\n        const { config } = instance;\n        if (config.hideScrollbar) {\n            const $scrollable = instance.$('.scrollable').first();\n            const x = config.scrollX ? 1 : 0;\n            const y = config.scrollY ? 1 : 0;\n            const scrollbarSize = OHIF.ui.getScrollbarSize();\n            $scrollable.css({\n                'margin-right': 0 - (scrollbarSize[0]) * y,\n                'margin-bottom': 0 - (scrollbarSize[1]) * x\n            });\n        }\n    }, 150);\n\n    instance.$scrollable = instance.$('.scrollable').first();\n    instance.scrollHandler = _.throttle(event => {\n        const $scrollable = event ? $(event.currentTarget) : instance.$scrollable;\n        const $scrollArea = $scrollable.closest('.scroll-area');\n        if ($scrollable[0] !== instance.$('.scrollable')[0]) return;\n        $scrollArea.removeClass('can-scroll-up can-scroll-down');\n        const height = $scrollable.outerHeight();\n        const scrollTop = $scrollable.scrollTop();\n        const { scrollHeight } = $scrollable[0];\n\n        // Stop here if unable to scroll\n        if (scrollHeight <= height) return;\n\n        // Check if can scroll up\n        if (scrollTop) {\n            $scrollArea.addClass('can-scroll-up');\n        }\n\n        // Check if can scroll down\n        if (scrollTop + height < scrollHeight) {\n            $scrollArea.addClass('can-scroll-down');\n        }\n    }, 150);\n\n    instance.scrollHandler();\n\n    instance.adjustMargins();\n    $(window).on('resize', instance.adjustMargins);\n});\n\nTemplate.scrollArea.onDestroyed(() => {\n    const instance = Template.instance();\n    $(window).off('resize', instance.adjustMargins);\n});\n\nTemplate.scrollArea.events({\n    'scroll .scrollable, mouseenter .scrollable, transitionend .scrollable'(event, instance) {\n        instance.scrollHandler(event);\n    },\n\n    'click .scroll-nav-down'(event, instance) {\n        const $scrollable = $(event.currentTarget).siblings('.scrollable');\n        const height = $scrollable.outerHeight();\n        const currentTop = $scrollable.scrollTop();\n        const { scrollHeight } = $scrollable[0];\n        const limit = scrollHeight - height;\n        let scrollTop = currentTop + instance.data.scrollStep;\n        scrollTop = scrollTop > limit ? limit : scrollTop;\n        $scrollable.stop().animate({ scrollTop }, 150, 'swing');\n    },\n\n    'click .scroll-nav-up'(event, instance) {\n        const $scrollable = $(event.currentTarget).siblings('.scrollable');\n        const currentTop = $scrollable.scrollTop();\n        let scrollTop = currentTop - instance.data.scrollStep;\n        scrollTop = scrollTop < 0 ? 0 : scrollTop;\n        $scrollable.stop().animate({ scrollTop }, 150, 'swing');\n    },\n});\n","import { Template } from 'meteor/templating';\nimport { Session } from 'meteor/session';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { OHIF } from 'meteor/ohif:core';\n\n/**\n * Global Blaze UI helpers to work with Blaze\n */\n\n// Return the absolute url\nTemplate.registerHelper('absoluteUrl', path => {\n    return OHIF.utils.absoluteUrl(path);\n});\n\n// Return the current template instance\nTemplate.registerHelper('instance', () => {\n    return Template.instance();\n});\n\n// Return the session value for the given key\nTemplate.registerHelper('session', key => {\n    return Session.get(key);\n});\n\n// Return the value for given parameter regardless if it's reactive or not\nTemplate.registerHelper('reactive', parameter => {\n    if (parameter instanceof ReactiveVar) {\n        return parameter.get();\n    }\n\n    return parameter;\n});\n","import { _ } from 'meteor/underscore';\nimport { Template } from 'meteor/templating';\n\n/**\n * Global Blaze UI helpers to manipulate data\n */\n\n// Base extend function to be used by extend and clone helpers\nconst extend = (...argsArray) => {\n    // Create the resulting object\n    const result = argsArray[0] || {};\n\n    // Extract the Spacebars kw hash\n    const lastArg = _.last(argsArray);\n    const kwHash = lastArg ? lastArg.hash : null;\n\n    // Extract the given objects\n    const objects = _.initial(argsArray);\n\n    // Iterate over the given objects\n    _.each(objects, current => {\n        // Stop here if the current argument is not an object\n        if (typeof current !== 'object') {\n            return;\n        }\n\n        // Extend the resulting object with the current argument object\n        _.extend(result, current);\n    });\n\n    // Extend the resulting object with the Spacebars kw hash\n    _.extend(result, kwHash);\n\n    // Return the resulting object\n    return result;\n};\n\n// Extend the first argument object it with the other argument objects\nTemplate.registerHelper('extend', (...argsArray) => {\n    return extend(...argsArray);\n});\n\n// Create a new object and extends it with the argument objects\nTemplate.registerHelper('clone', (...argsArray) => {\n    const newArgs = argsArray.slice();\n    newArgs.unshift({});\n    return extend(...newArgs);\n});\n\n// Choose the first truthy value in the given values\nTemplate.registerHelper('choose', (...values) => {\n    let result;\n    _.each(_.initial(values, 1), value => {\n        if (result) {\n            return;\n        }\n\n        result = value;\n    });\n    return result;\n});\n","import { _ } from 'meteor/underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\n/**\n * Global Blaze UI helpers to development debugging\n */\n\n// Stop here if it's not development environment\nif (!Meteor.isDevelopment) {\n    return;\n}\n\n// Debug some value on console\nTemplate.registerHelper('debug', (...values) => {\n    console.debug(...values);\n});\n","import './blaze.js';\nimport './data.js';\nimport './debug.js';\nimport './logical.js';\nimport './number.js';\nimport './string.js';\nimport './typing.js';\nimport './ui.js';\n","import { _ } from 'meteor/underscore';\nimport { Template } from 'meteor/templating';\n\n/**\n * Global Blaze UI helpers to work with logical operations\n */\n\n// Convert any value into a boolean value\nTemplate.registerHelper('bool', value => {\n    return !!value;\n});\n\n// Check if two values are identical\nTemplate.registerHelper('eq', (a, b) => {\n    return a === b;\n});\n\n// Check if two values are different\nTemplate.registerHelper('ne', (a, b) => {\n    return a !== b;\n});\n\n// Check if the first value is greater than the second one\nTemplate.registerHelper('gt', (a, b) => {\n    return a > b;\n});\n\n// Check if the first value is lesser than the second one\nTemplate.registerHelper('lt', (a, b) => {\n    return a < b;\n});\n\n// Check if the first value is greater than or equals the second one\nTemplate.registerHelper('gte', (a, b) => {\n    return a >= b;\n});\n\n// Check if the first value is lesser than or equals the second one\nTemplate.registerHelper('lte', (a, b) => {\n    return a <= b;\n});\n\n// Get the boolean negation for the given value\nTemplate.registerHelper('not', value => {\n    return !value;\n});\n\n// Check if all the given values are true\nTemplate.registerHelper('and', (...values) => {\n    let result = true;\n    _.each(_.initial(values, 1), value => {\n        return !value && (result = false);\n    });\n    return result;\n});\n\n// Check if one of the given values is true\nTemplate.registerHelper('or', (...values) => {\n    let result = false;\n    _.each(_.initial(values, 1), value => {\n        return value && (result = true);\n    });\n    return result;\n});\n\n// Return the second parameter if the first is true or the third if it's false\nTemplate.registerHelper('valueIf', (condition, valueIfTrue, valueIfFalse) => {\n    if (condition) {\n        return valueIfTrue;\n    }\n\n    return valueIfFalse;\n});\n","import { _ } from 'meteor/underscore';\nimport { Template } from 'meteor/templating';\n\n/**\n * Global Blaze UI helpers to work with numeric operations\n */\n\n// Sum all the given numbers\nTemplate.registerHelper('sum', (...values) => {\n    let result = 0;\n    _.each(_.initial(values, 1), value => (result += (value | 0)));\n    return result;\n});\n\nTemplate.registerHelper('isValidNumber', value => {\n    return typeof value === 'number' && !isNaN(value);\n});\n\nTemplate.registerHelper('filterNaN', value => {\n    return isNaN(value) ? '' : value;\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { _ } from 'meteor/underscore';\nimport { Template } from 'meteor/templating';\n\n/**\n * Global Blaze UI helpers to work with Strings\n */\n\n// Concatenate the give strings\nTemplate.registerHelper('concat', (...args) => {\n    const values = _.initial(args, 1);\n    let result = '';\n    _.each(values, value => {\n        result += typeof value !== 'undefined' ? value : '';\n    });\n    return result;\n});\n\n// Encode any string into a safe format for HTML id attribute\nTemplate.registerHelper('encodeId', OHIF.string.encodeId);\n","import { _ } from 'meteor/underscore';\nimport { Template } from 'meteor/templating';\n\n/**\n * Global Blaze UI helpers to work with Strings\n */\n\n// Check if the value's type is undefined\nTemplate.registerHelper('isUndefined', value => {\n    return _.isUndefined(value);\n});\n\n// Check if the value's type is object\nTemplate.registerHelper('isObject', value => {\n    return _.isObject(value);\n});\n\n// Check if the value is an array instance\nTemplate.registerHelper('isArray', value => {\n    return _.isArray(value);\n});\n","import { OHIF } from 'meteor/ohif:core';\nimport { Template } from 'meteor/templating';\n\n/**\n * Global Blaze UI helpers\n */\n\n// Access OHIF.uiSettings object\nTemplate.registerHelper('uiSettings', () => {\n    return OHIF.uiSettings;\n});\n","import { Template } from 'meteor/templating';\nimport { OHIF } from 'meteor/ohif:core';\n\nOHIF.blaze = {};\n\n// Clone a template and return the clone\nOHIF.blaze.cloneTemplate = (template, newName) => {\n    if (!template){\n        return;\n    }\n\n    const name = newName || template.viewName;\n    const clone = new Template(name, template.renderFunction);\n    clone.inheritsEventsFrom(template);\n    clone.inheritsHelpersFrom(template);\n    clone.inheritsHooksFrom(template);\n    return clone;\n};\n\n// Navigate upwards the component and get the parent with the given view name\nOHIF.blaze.getParentView = (view, parentViewName) => {\n    let currentView = view;\n    while (currentView) {\n        if (currentView.name === parentViewName) {\n            break;\n        }\n\n        currentView = currentView.originalParentView || currentView.parentView;\n    }\n\n    return currentView;\n};\n\n// Search for the parent component of the given view\nOHIF.blaze.getParentComponent = (view, property='_component') => {\n    let currentView = view;\n    while (currentView) {\n        currentView = currentView.originalParentView || currentView.parentView;\n        if (currentView && currentView[property]) {\n            return currentView[property];\n        }\n    }\n};\n\n// Search for the parent template of the given view\nOHIF.blaze.getParentTemplateView = view => {\n    let currentView = view;\n    while (currentView) {\n        currentView = currentView.originalParentView || currentView.parentView;\n        if (!currentView || !currentView.name) return;\n        if (currentView.name.indexOf('Template.') > -1 && currentView.name.indexOf('Template.__dynamic') === -1) {\n            return currentView;\n        }\n    }\n};\n\n// Get the view that contains the desired section's content and return it\nOHIF.blaze.getSectionContent = (view, sectionName) => {\n    let currentView = view;\n    while (!currentView._sectionMap || !currentView._sectionMap.get(sectionName)) {\n        currentView = OHIF.blaze.getParentTemplateView(currentView);\n        if (!currentView) return;\n    }\n\n    return currentView._sectionMap.get(sectionName);\n};\n","import { OHIF } from 'meteor/ohif:core';\nimport { _ } from 'meteor/underscore';\n\nOHIF.cornerstone = {};\n\nOHIF.cornerstone.getBoundingBox = (context, textLines, x, y, options) => {\n    if (Object.prototype.toString.call(textLines) !== '[object Array]') {\n        textLines = [textLines];\n    }\n\n    const padding = 5;\n    const font = cornerstoneTools.textStyle.getFont();\n    const fontSize = cornerstoneTools.textStyle.getFontSize();\n\n    context.save();\n    context.font = font;\n    context.textBaseline = 'top';\n\n    // Find the longest text width in the array of text data\n    let maxWidth = 0;\n\n    textLines.forEach(text => {\n        // Get the text width in the current font\n        const width = context.measureText(text).width;\n\n        // Find the maximum with for all the text rows;\n        maxWidth = Math.max(maxWidth, width);\n    });\n\n    // Calculate the bounding box for this text box\n    const boundingBox = {\n        width: maxWidth + (padding * 2),\n        height: padding + textLines.length * (fontSize + padding)\n    };\n\n    if (options && options.centering && options.centering.x === true) {\n        x -= boundingBox.width / 2;\n    }\n\n    if (options && options.centering && options.centering.y === true) {\n        y -= boundingBox.height / 2;\n    }\n\n    boundingBox.left = x;\n    boundingBox.top = y;\n\n    context.restore();\n\n    // Return the bounding box so it can be used for pointNearHandle\n    return boundingBox;\n};\n\nOHIF.cornerstone.pixelToPage = (element, position) => {\n    const enabledElement = cornerstone.getEnabledElement(element);\n    const result = {\n        x: 0,\n        y: 0\n    };\n\n    // Stop here if the cornerstone element is not enabled or position is not an object\n    if (!enabledElement || typeof position !== 'object') {\n        return result;\n    }\n\n    const canvas = enabledElement.canvas;\n\n    const canvasOffset = $(canvas).offset();\n    result.x += canvasOffset.left;\n    result.y += canvasOffset.top;\n\n    const canvasPosition = cornerstone.pixelToCanvas(element, position);\n    result.x += canvasPosition.x;\n    result.y += canvasPosition.y;\n\n    return result;\n};\n\nOHIF.cornerstone.repositionTextBox = (eventData, measurementData, config) => {\n    // Stop here if it's not a measurement creating\n    if (!measurementData.isCreating) {\n        return;\n    }\n\n    const element = eventData.element;\n    const enabledElement = cornerstone.getEnabledElement(element);\n    const image = enabledElement.image;\n\n    const allowedBorders = OHIF.uiSettings.autoPositionMeasurementsTextCallOuts;\n    const allow = {\n        T: !allowedBorders || _.contains(allowedBorders, 'T'),\n        R: !allowedBorders || _.contains(allowedBorders, 'R'),\n        B: !allowedBorders || _.contains(allowedBorders, 'B'),\n        L: !allowedBorders || _.contains(allowedBorders, 'L')\n    };\n\n    const getAvailableBlankAreas = (enabledElement, labelWidth, labelHeight) => {\n        const { element, canvas, image } = enabledElement;\n\n        const topLeft = cornerstone.pixelToCanvas(element, {\n            x: 0,\n            y: 0\n        });\n\n        const bottomRight = cornerstone.pixelToCanvas(element, {\n            x: image.width,\n            y: image.height\n        });\n\n        const $canvas = $(canvas);\n        const canvasWidth = $canvas.outerWidth();\n        const canvasHeight = $canvas.outerHeight();\n\n        const result = {};\n        result['x-1'] = allow.L && (topLeft.x > labelWidth);\n        result['y-1'] = allow.T && (topLeft.y > labelHeight);\n        result.x1 = allow.R && (canvasWidth - bottomRight.x > labelWidth);\n        result.y1 = allow.B && (canvasHeight - bottomRight.y > labelHeight);\n\n        return result;\n    };\n\n    const getRenderingInformation = (limits, tool) => {\n        const mid = {};\n        mid.x = limits.x / 2;\n        mid.y = limits.y / 2;\n\n        const directions = {};\n        directions.x = tool.x < mid.x ? -1 : 1;\n        directions.y = tool.y < mid.y ? -1 : 1;\n\n        const diffX = directions.x < 0 ? tool.x : limits.x - tool.x;\n        const diffY = directions.y < 0 ? tool.y : limits.y - tool.y;\n        let cornerAxis = diffY < diffX ? 'y' : 'x';\n\n        const map = {\n            'x-1': 'L',\n            'y-1': 'T',\n            x1: 'R',\n            y1: 'B'\n        };\n\n        let current = 0;\n        while (current < 4 && !allow[map[cornerAxis + directions[cornerAxis]]]) {\n            // Invert the direction for the next iteration\n            directions[cornerAxis] *= -1;\n\n            // Invert the tempCornerAxis\n            cornerAxis = cornerAxis === 'x' ? 'y' : 'x';\n\n            current++;\n        }\n\n        return {\n            directions,\n            cornerAxis\n        };\n    };\n\n    const calculateAxisCenter = (axis, start, end) => {\n        const a = start[axis];\n        const b = end[axis];\n        const lowest = Math.min(a, b);\n        const highest = Math.max(a, b);\n        return lowest + ((highest - lowest) / 2);\n    };\n\n    const getTextBoxSizeInPixels = (element, bounds) => {\n        const topLeft = cornerstone.pageToPixel(element, 0, 0);\n        const bottomRight = cornerstone.pageToPixel(element, bounds.x, bounds.y);\n        return {\n            x: bottomRight.x - topLeft.x,\n            y: bottomRight.y - topLeft.y\n        };\n    };\n\n    function getTextBoxOffset(config, cornerAxis, toolAxis, boxSize) {\n        config = config || {};\n        const centering = config.centering || {};\n        const centerX = !!centering.x;\n        const centerY = !!centering.y;\n        const halfBoxSizeX = boxSize.x / 2;\n        const halfBoxSizeY = boxSize.y / 2;\n        const offset = {\n            x: [],\n            y: []\n        };\n\n        if (cornerAxis === 'x') {\n            const offsetY = centerY ? 0 : halfBoxSizeY;\n\n            offset.x[-1] = centerX ? halfBoxSizeX : 0;\n            offset.x[1] = centerX ? -halfBoxSizeX : -boxSize.x;\n            offset.y[-1] = offsetY;\n            offset.y[1] = offsetY;\n        } else {\n            const offsetX = centerX ? 0 : halfBoxSizeX;\n\n            offset.x[-1] = offsetX;\n            offset.x[1] = offsetX;\n            offset.y[-1] = centerY ? halfBoxSizeY : 0;\n            offset.y[1] = centerY ? -halfBoxSizeY : -boxSize.y;\n        }\n\n        return offset;\n    }\n\n    const handles = measurementData.handles;\n    const textBox = handles.textBox;\n\n    const $canvas = $(enabledElement.canvas);\n    const canvasWidth = $canvas.outerWidth();\n    const canvasHeight = $canvas.outerHeight();\n    const offset = $canvas.offset();\n    const canvasDimensions = {\n        x: canvasWidth,\n        y: canvasHeight\n    };\n\n    const bounds = {};\n    bounds.x = textBox.boundingBox.width;\n    bounds.y = textBox.boundingBox.height;\n\n    const getHandlePosition = key => _.pick(handles[key], ['x', 'y']);\n    const start = getHandlePosition('start');\n    const end = getHandlePosition('end');\n\n    const tool = {};\n    tool.x = calculateAxisCenter('x', start, end);\n    tool.y = calculateAxisCenter('y', start, end);\n\n    let limits = {};\n    limits.x = image.width;\n    limits.y = image.height;\n\n    let { directions, cornerAxis } = getRenderingInformation(limits, tool);\n\n    const availableAreas = getAvailableBlankAreas(enabledElement, bounds.x, bounds.y);\n    const tempDirections = _.clone(directions);\n    let tempCornerAxis = cornerAxis;\n    let foundPlace = false;\n    let current = 0;\n    while (current < 4) {\n        if (availableAreas[tempCornerAxis + tempDirections[tempCornerAxis]]) {\n            foundPlace = true;\n            break;\n        }\n\n        // Invert the direction for the next iteration\n        tempDirections[tempCornerAxis] *= -1;\n\n        // Invert the tempCornerAxis\n        tempCornerAxis = tempCornerAxis === 'x' ? 'y' : 'x';\n\n        current++;\n    }\n\n    let cornerAxisPosition;\n    if (foundPlace) {\n        _.extend(directions, tempDirections);\n        cornerAxis = tempCornerAxis;\n        cornerAxisPosition = directions[cornerAxis] < 0 ? 0 : limits[cornerAxis];\n    } else {\n        _.extend(limits, canvasDimensions);\n\n        const toolPositionOnCanvas = cornerstone.pixelToCanvas(element, tool);\n        const renderingInformation = getRenderingInformation(limits, toolPositionOnCanvas);\n        directions = renderingInformation.directions;\n        cornerAxis = renderingInformation.cornerAxis;\n\n        const position = {\n            x: directions.x < 0 ? offset.left : offset.left + canvasWidth,\n            y: directions.y < 0 ? offset.top : offset.top + canvasHeight\n        };\n\n        const pixelPosition = cornerstone.pageToPixel(element, position.x, position.y);\n        cornerAxisPosition = pixelPosition[cornerAxis];\n    }\n\n    const toolAxis = cornerAxis === 'x' ? 'y' : 'x';\n    const boxSize = getTextBoxSizeInPixels(element, bounds);\n\n    textBox[cornerAxis] = cornerAxisPosition;\n    textBox[toolAxis] = tool[toolAxis];\n\n    // Adjust the text box position reducing its size from the corner axis\n    const textBoxOffset = getTextBoxOffset(config, cornerAxis, toolAxis, boxSize);\n    textBox[cornerAxis] += textBoxOffset[cornerAxis][directions[cornerAxis]];\n\n    // Preventing the text box from partially going outside the canvas area\n    const topLeft = cornerstone.pixelToCanvas(element, textBox);\n    const bottomRight = {\n        x: topLeft.x + bounds.x,\n        y: topLeft.y + bounds.y\n    };\n    const canvasBorders = {\n        x0: offset.left,\n        y0: offset.top,\n        x1: offset.left + canvasWidth,\n        y1: offset.top + canvasHeight\n    };\n    if (topLeft[toolAxis] < 0) {\n        const x = canvasBorders.x0;\n        const y = canvasBorders.y0;\n        const pixelPosition = cornerstone.pageToPixel(element, x, y);\n        textBox[toolAxis] = pixelPosition[toolAxis];\n    } else if (bottomRight[toolAxis] > canvasDimensions[toolAxis]) {\n        const x = canvasBorders.x1 - bounds.x;\n        const y = canvasBorders.y1 - bounds.y;\n        const pixelPosition = cornerstone.pageToPixel(element, x, y);\n        textBox[toolAxis] = pixelPosition[toolAxis];\n    }\n};\n","import './blaze.js';\nimport './cornerstone.js';\nimport './string.js';\nimport './ui.js';\nimport './utils.js';\nimport './viewer.js';\n","import { OHIF } from 'meteor/ohif:core';\nimport { _ } from 'meteor/underscore';\nimport { $ } from 'meteor/jquery';\n\nOHIF.string = {};\n\n// Search for some string inside any object or array\nOHIF.string.search = (object, query, property=null, result=[]) => {\n    // Create the search pattern\n    const pattern = new RegExp($.trim(query), 'i');\n\n    _.each(object, item => {\n        // Stop here if item is empty\n        if (!item) {\n            return;\n        }\n\n        // Get the value to be compared\n        const value = _.isString(property) ? item[property] : item;\n\n        // Check if the value match the pattern\n        if (_.isString(value) && pattern.test(value)) {\n            // Add the current item to the result\n            result.push(item);\n        }\n\n        if (_.isObject(item)) {\n            // Search recursively the item if the current item is an object\n            OHIF.string.search(item, query, property, result);\n        }\n    });\n\n    // Return the found items\n    return result;\n};\n\n// Encode any string into a safe format for HTML id attribute\nOHIF.string.encodeId = input => {\n    const string = input && input.toString ? input.toString() : input;\n\n    // Return an underscore if the given string is empty or if it's not a string\n    if (string === '' || typeof string !== 'string') {\n        return '_';\n    }\n\n    // Create a converter to replace non accepted chars\n    const converter = match => '_' + match[0].charCodeAt(0).toString(16) + '_';\n\n    // Encode the given string and return it\n    return string.replace(/[^a-zA-Z0-9-]/g, converter);\n};\n","import { OHIF } from 'meteor/ohif:core';\nimport { Meteor } from 'meteor/meteor';\n\n// Get the UI settings\nconst ui = Meteor.settings && Meteor.settings.public && Meteor.settings.public.ui;\nOHIF.uiSettings = ui || {};\n\n/**\n * Get the offset for the given element\n *\n * @param {Object} element DOM element which will have the offser calculated\n * @returns {Object} Object containing the top and left offset\n */\nOHIF.ui.getOffset = element => {\n    let top = 0;\n    let left = 0;\n    if (element.offsetParent) {\n        do {\n            left += element.offsetLeft;\n            top += element.offsetTop;\n        } while (element = element.offsetParent);\n    }\n\n    return {\n        left,\n        top\n    };\n};\n\n/**\n * Get the vertical and horizontal scrollbar sizes\n * Got from https://stackoverflow.com/questions/986937/how-can-i-get-the-browsers-scrollbar-sizes\n *\n * @returns {Array} Array containing the scrollbar horizontal and vertical sizes\n */\nOHIF.ui.getScrollbarSize = () => {\n    const inner = document.createElement('p');\n    inner.style.width = '100%';\n    inner.style.height = '100%';\n\n    const outer = document.createElement('div');\n    outer.style.position = 'absolute';\n    outer.style.top = '0px';\n    outer.style.left = '0px';\n    outer.style.visibility = 'hidden';\n    outer.style.width = '100px';\n    outer.style.height = '100px';\n    outer.style.overflow = 'hidden';\n    outer.appendChild(inner);\n\n    document.body.appendChild(outer);\n\n    const w1 = inner.offsetWidth;\n    const h1 = inner.offsetHeight;\n    outer.style.overflow = 'scroll';\n    let w2 = inner.offsetWidth;\n    let h2 = inner.offsetHeight;\n\n    if (w1 === w2) {\n        w2 = outer.clientWidth;\n    }\n\n    if (h1 === h2) {\n        h2 = outer.clientHeight;\n    }\n\n    document.body.removeChild(outer);\n\n    return [(w1 - w2), (h1 - h2)];\n};\n","import { OHIF } from 'meteor/ohif:core';\n\n// Return the array sorting function for its object's properties\nOHIF.utils.sortBy = function() {\n    var fields = [].slice.call(arguments),\n        n_fields = fields.length;\n\n    return function(A, B) {\n        var a, b, field, key, primer, reverse, result, i;\n\n        for (i = 0; i < n_fields; i++) {\n            result = 0;\n            field = fields[i];\n\n            key = typeof field === 'string' ? field : field.name;\n\n            a = A[key];\n            b = B[key];\n\n            if (typeof field.primer !== 'undefined') {\n                a = field.primer(a);\n                b = field.primer(b);\n            }\n\n            reverse = (field.reverse) ? -1 : 1;\n\n            if (a < b) {\n                result = reverse * -1;\n            }\n\n            if (a > b) {\n                result = reverse * 1;\n            }\n\n            if (result !== 0) {\n                break;\n            }\n        }\n\n        return result;\n    };\n};\n","import { OHIF } from 'meteor/ohif:core';\n\nOHIF.viewer = {};","import { Meteor } from 'meteor/meteor';\nimport { OHIF } from 'meteor/ohif:core';\n\nOHIF.ui.handleError = error => {\n    let { title, message } = error;\n\n    if (!title) {\n        if (error instanceof Meteor.Error) {\n            title = error.error;\n        } else if (error instanceof Error) {\n            title = error.name;\n        }\n    }\n\n    if (!message) {\n        if (error instanceof Meteor.Error) {\n            message = error.reason;\n        } else if (error instanceof Error) {\n            message = error.message;\n        }\n    }\n\n    const data = Object.assign({\n        title,\n        message,\n        class: 'themed',\n        hideConfirm: true,\n        cancelLabel: 'Dismiss',\n        cancelClass: 'btn-secondary'\n    }, error || {});\n\n    // TODO: Find a better way to handle errors instead of displaying a dialog for all of them.\n    // OHIF.ui.showDialog('dialogForm', data);\n};\n","import './bounded/bounded.js';\nimport './dimensional/dimensional.js';\nimport './dialog/display.js';\nimport './dialog/spatial.js';\nimport './dialog/unsavedChangesDialog.js';\nimport './draggable/draggable.js';\nimport './dropdown/class.js';\nimport './dropdown/display.js';\nimport './notifications/notifications.js';\nimport './popover/display.js';\nimport './resizable/resizable.js';\nimport './unsavedChanges/unsavedChanges.js';\nimport './handleError.js';\nimport './styleProperty.js';\n","import { OHIF } from 'meteor/ohif:core';\n\n/*\n * https://github.com/swederik/dragula/blob/ccc15d75186f5168e7abadbe3077cf12dab09f8b/styleProperty.js\n */\n(function() {\n    'use strict';\n\n    const browserProps = {};\n\n    function eachVendor(prop, fn) {\n        const prefixes = ['Webkit', 'Moz', 'ms', 'O'];\n        fn(prop);\n        for (let i = 0; i < prefixes.length; i++) {\n            fn(prefixes[i] + prop.charAt(0).toUpperCase() + prop.slice(1));\n        }\n    }\n\n    function check(property, testValue) {\n        const sandbox = document.createElement('iframe');\n        const element = document.createElement('p');\n\n        document.body.appendChild(sandbox);\n        sandbox.contentDocument.body.appendChild(element);\n        const support = set(element, property, testValue);\n\n        // We have to do this because remove() is not supported by IE11 and below\n        sandbox.parentElement.removeChild(sandbox);\n        return support;\n    }\n\n    function checkComputed(el, prop) {\n        const computed = window.getComputedStyle(el).getPropertyValue(prop);\n        return ((computed !== void 0) && computed.length > 0 && computed !== 'none');\n    }\n\n    function set(el, prop, value) {\n        let match = false;\n\n        if (browserProps[prop] === void 0) {\n            eachVendor(prop, function(vendorProp) {\n                if (el.style[vendorProp] !== void 0 && match === false) {\n                    el.style[vendorProp] = value;\n                    if (checkComputed(el, vendorProp)) {\n                        match = true;\n                        browserProps[prop] = vendorProp;\n                    }\n                }\n            });\n        } else {\n            el.style[browserProps[prop]] = value;\n            return true;\n        }\n\n        return match;\n    }\n\n    const styleProperty = {\n        check,\n        set\n    };\n\n    OHIF.ui.styleProperty = styleProperty;\n}());\n\nconst { styleProperty } = OHIF.ui;\n\nexport { styleProperty };\n","import { $ } from 'meteor/jquery';\nimport { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\n// Allow attaching to jQuery selectors\n$.fn.bounded = function(options) {\n    _.each(this, element => {\n        const boundedInstance = $(element).data('boundedInstance');\n        if (options === 'destroy' && boundedInstance) {\n            $(element).removeData('boundedInstance');\n            boundedInstance.destroy();\n        } else {\n            if (boundedInstance) {\n                boundedInstance.options(options);\n            } else {\n                $(element).data('boundedInstance', new Bounded(element, options));\n            }\n        }\n    });\n\n    return this;\n};\n\n/**\n * This class makes an element bounded to other element's borders.\n */\nclass Bounded {\n\n    // Initialize the instance with the given element and options\n    constructor(element, options={}) {\n        this.element = element;\n        this.$element = $(element);\n        this.options(options);\n        this.setBoundedFlag(false);\n\n        // Force to hardware acceleration to move element if browser supports translate property\n        this.useTransform = OHIF.ui.styleProperty.check('transform', 'translate(1px, 1px)');\n    }\n\n    // Set or change the instance options\n    options(options={}) {\n        // Process the given options and store it in the instance\n        const { boundingElement, positionElement, dimensionElement, allowResizing } = options;\n        this.positionElement = positionElement || this.element;\n        this.$positionElement = $(this.positionElement);\n        this.dimensionElement = dimensionElement || this.element;\n        this.$dimensionElement = $(this.dimensionElement);\n        this.boundingElement = boundingElement;\n        this.$boundingElement = $(this.boundingElement);\n        this.allowResizing = allowResizing;\n\n        // Check for fixed positioning\n        if (this.$positionElement.css('position') === 'fixed') {\n            this.boundingElement = window;\n        }\n\n        // Destroy and initialize again the instance\n        this.destroy();\n        this.init();\n    }\n\n    // Initialize the bounding behaviour\n    init() {\n        // Create the event handlers\n        this.defineEventHandlers();\n\n        // Attach the created event handlers to the component\n        this.attachEventHandlers();\n\n        // Add the bounded class to the element\n        this.$element.addClass('bounded');\n\n        // Handle the positioning on window resize\n        const $window = $(window);\n        const windowResizeHandler = () => {\n            // Check if the element is still in DOM and remove the handler if it is not\n            if (!this.$element.closest(document.documentElement).length) {\n                $window.off('resize', windowResizeHandler);\n            }\n\n            this.$element.trigger('spatialChanged');\n        };\n\n        $window.on('resize', windowResizeHandler);\n\n        // Trigger the bounding check for the first timepoint\n        setTimeout(() => this.$element.trigger('spatialChanged'));\n    }\n\n    // Destroy this instance, returning the element to its previous state\n    destroy() {\n        // Detach the event handlers\n        this.detachEventHandlers();\n\n        // Remove the bounded class from the element\n        this.$element.removeClass('bounded');\n    }\n\n    static spatialInfo(positionElement, dimensionElement) {\n        // Create the result object\n        const result = {};\n\n        // Check if the element is the window\n        if (!dimensionElement || dimensionElement === window) {\n            const $window = $(window);\n            const width = $window.outerWidth();\n            const height = $window.outerHeight();\n            return {\n                width,\n                height,\n                x0: 0,\n                y0: 0,\n                x1: width,\n                y1: height\n            };\n        }\n\n        // Get the jQuery object for the elements\n        const $dimensionElement = $(dimensionElement);\n        const $positionElement = $(positionElement);\n\n        // Get the integer numbers for element's width\n        result.width = $dimensionElement.outerWidth();\n\n        // Get the integer numbers for element's height\n        result.height = $dimensionElement.outerHeight();\n\n        // Get the position property based on the element position CSS attribute\n        const elementPosition = $positionElement.css('position');\n        const positionProperty = elementPosition === 'fixed' ? 'position' : 'offset';\n\n        // Get the element's start position\n        const position = $positionElement[positionProperty]();\n        result.x0 = position.left;\n        result.y0 = position.top;\n\n        // Get the element's end position\n        result.x1 = result.x0 + result.width;\n        result.y1 = result.y0 + result.height;\n\n        // Return the result object\n        return result;\n    }\n\n    // Define the event handlers for this class\n    defineEventHandlers() {\n        this.cssPositionHandler = (elementInfo, boundingInfo) => {\n            // Fix element's x positioning and width\n            if (this.allowResizing && elementInfo.width > boundingInfo.width) {\n                this.$dimensionElement.width(boundingInfo.width);\n                this.$positionElement.css('left', boundingInfo.x0);\n                this.setBoundedFlag(true);\n            } else if (elementInfo.x0 < boundingInfo.x0) {\n                this.$positionElement.css('left', boundingInfo.x0);\n                this.setBoundedFlag(true);\n            } else if (elementInfo.x1 > boundingInfo.x1) {\n                this.$positionElement.css('left', boundingInfo.x1 - elementInfo.width);\n                this.setBoundedFlag(true);\n            }\n\n            // Fix element's y positioning and height\n            if (this.allowResizing && elementInfo.height > boundingInfo.height) {\n                this.$dimensionElement.height(boundingInfo.height);\n                this.$positionElement.css('top', boundingInfo.y0);\n                this.setBoundedFlag(true);\n            } else if (elementInfo.y0 < boundingInfo.y0) {\n                this.$positionElement.css('top', boundingInfo.y0);\n                this.setBoundedFlag(true);\n            } else if (elementInfo.y1 > boundingInfo.y1) {\n                this.$positionElement.css('top', boundingInfo.y1 - elementInfo.height);\n                this.setBoundedFlag(true);\n            }\n        };\n\n        this.getCSSTranslate = () => {\n            const matrixToArray = str => str.match(/(-?[0-9\\.]+)/g);\n            const transformMatrix = matrixToArray(this.$positionElement.css('transform')) || [];\n            return {\n                x: parseFloat(transformMatrix[4]) || 0,\n                y: parseFloat(transformMatrix[5]) || 0\n            };\n        };\n\n        this.cssTransformHandler = (elementInfo, boundingInfo, translate) => {\n            if (elementInfo.x1 > boundingInfo.x1) {\n                translate.x -= elementInfo.x1 - boundingInfo.x1;\n            }\n\n            if (elementInfo.y1 > boundingInfo.y1) {\n                translate.y -= elementInfo.y1 - boundingInfo.y1;\n            }\n\n            if (elementInfo.x0 < boundingInfo.x0) {\n                translate.x += boundingInfo.x0 - elementInfo.x0;\n            }\n\n            if (elementInfo.y0 < boundingInfo.y0) {\n                translate.y += boundingInfo.y0 - elementInfo.y0;\n            }\n\n            const translation = `translate(${translate.x}px, ${translate.y}px)`;\n            OHIF.ui.styleProperty.set(this.positionElement, 'transform', translation);\n        };\n\n        this.spatialChangedHandler = event => {\n            // Get the spatial information for element and its bounding element\n            const { positionElement, dimensionElement, boundingElement, useTransform } = this;\n            const elementInfo = Bounded.spatialInfo(positionElement, dimensionElement);\n            const boundingInfo = Bounded.spatialInfo(boundingElement, boundingElement);\n\n            // Check if CSS positioning or transform will be used\n            const translate = this.getCSSTranslate();\n            if (useTransform && (translate.x || translate.y)) {\n                this.cssTransformHandler(elementInfo, boundingInfo, translate);\n            } else {\n                this.cssPositionHandler(elementInfo, boundingInfo);\n            }\n        };\n    }\n\n    // Attach the event handlers to the element in order to bound it\n    attachEventHandlers() {\n        this.$element.on('spatialChanged', this.spatialChangedHandler);\n        this.$boundingElement.on('resize', this.spatialChangedHandler);\n    }\n\n    // Detach the event handlers from the element\n    detachEventHandlers() {\n        this.$element.off('spatialChanged', this.spatialChangedHandler);\n        this.$boundingElement.off('resize', this.spatialChangedHandler);\n    }\n\n    // This is a means to let outside world know that the element in question has been moved\n    setBoundedFlag(value) {\n        this.$element.data('wasBounded', value);\n    }\n\n}\n\nOHIF.ui.Bounded = Bounded;\n","import { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\nimport { _ } from 'meteor/underscore';\nimport { $ } from 'meteor/jquery';\nimport { OHIF } from 'meteor/ohif:core';\n\nOHIF.ui.showDialog = (templateName, dialogData={}) => {\n    // Check if the given template exists\n    const template = Template[templateName];\n    if (!template) {\n        throw {\n            name: 'TEMPLATE_NOT_FOUND',\n            message: `Template ${templateName} not found.`\n        };\n    }\n\n    let promise;\n    let templateData;\n    if (dialogData && dialogData.promise instanceof Promise) {\n        // Use the given promise to control the modal\n        promise = dialogData.promise;\n        templateData = dialogData;\n    } else {\n        // Create a new promise to control the modal and store its resolve and reject callbacks\n        let promiseResolve;\n        let promiseReject;\n        promise = new Promise((resolve, reject) => {\n            promiseResolve = resolve;\n            promiseReject = reject;\n        });\n\n        // Render the dialog with the given template passing the promise object and callbacks\n        templateData = _.extend({}, dialogData, {\n            promise,\n            promiseResolve,\n            promiseReject\n        });\n    }\n\n    const view = Blaze.renderWithData(template, templateData, document.body);\n\n    const node = view.firstNode();\n    const $node = node && $(node);\n\n    let $modal;\n    if ($node && $node.hasClass('modal')) {\n        $modal = $node;\n    } else if ($node && $node.has('.modal')) {\n        $modal = $node.find('.modal:first');\n    }\n\n    // Destroy the created dialog view when the promise is either resolved or rejected\n    const dismissModal = (hideFirst=false) => {\n        if (hideFirst || (dialogData && dialogData.promise && $modal)) {\n            $modal.one('hidden.bs.modal', () => Blaze.remove(view)).modal('hide');\n        } else {\n            Blaze.remove(view);\n        }\n    };\n\n    // Create a handler to dismiss the modal on navigation\n    const $body = $(document.body);\n    const navigationHandler = () => {\n        dismissModal(true);\n        $body.off('ohif.navigated', navigationHandler);\n    };\n\n    promise.then(() => dismissModal(false)).catch(() => dismissModal(false));\n\n    // Dismiss the modal if navigation occurs and it should not be kept opened\n    if (!dialogData.keepOpenOnNavigation) {\n        $body.on('ohif.navigated', navigationHandler);\n    }\n\n    // Return the promise to allow callbacks stacking from outside\n    return promise;\n};\n","import { OHIF } from 'meteor/ohif:core';\n\nOHIF.ui.repositionDialog = ($modal, x, y) => {\n    const $dialog = $modal.find('.modal-dialog');\n\n    // Remove the margins and set its position as fixed\n    $dialog.css({\n        margin: 0,\n        position: 'fixed'\n    }).bounded();\n\n    // Temporarily show the modal\n    const isVisible = $modal.is(':visible');\n    $modal.show();\n\n    // Calculate the center position on screen\n    const height = $dialog.outerHeight();\n    const width = $dialog.outerWidth();\n    const left = parseInt(x - (width / 2));\n    const top = parseInt(y - (height / 2));\n\n    // Reposition the modal and readjust it to the window boundaries if needed\n    $dialog.css({\n        left,\n        top\n    }).trigger('spatialChanged').one('transitionend', () => $dialog.trigger('spatialChanged'));\n\n    // Switch the modal to its previous visibility state\n    $modal.toggle(isVisible);\n};\n","import { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\nimport { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\nOHIF.ui.unsavedChangesDialog = function(callback, options) {\n\n    // Render the dialog with the given template passing the promise object and callbacks\n    const templateData = _.extend({}, options, {\n        callback: callback\n    });\n    Blaze.renderWithData(Template.unsavedChangesDialog, templateData, document.body);\n\n};\n","import { $ } from 'meteor/jquery';\n\n// Temporarily show and hide the element to enable dimension calculations\n$.fn.tempShow = function(callback) {\n    const elementsToHide = [];\n    let current = this;\n\n    // Temporarily show all parent invisible elements until body\n    while (this.is(':hidden')) {\n        const $element = $(current);\n        if (!$element.length || $element.is(':visible')) {\n            break;\n        }\n\n        $element.addClass('visible');\n        elementsToHide.push(current);\n        current = $element[0].parentElement;\n    }\n\n    if (typeof callback === 'function') {\n        callback(this);\n    }\n\n    $(elementsToHide).removeClass('visible');\n\n    return this;\n};\n\n// Adjust the max width/height to enable CSS3 transitions\n$.fn.adjustMax = function(dimension, modifierFn) {\n    const $element = $(this);\n\n    // Temporarily make the element visible to allow getting its dimensions\n    $element.tempShow(() => {\n        const maxProperty = `max-${dimension}`;\n\n        // Remove the current max restriction\n        $element.each((i, e) => e.style.setProperty(maxProperty, 'none', 'important'));\n\n        // Get the dimension function to obtain the outer dimension\n        const dimensionFn = 'outer' + dimension.charAt(0).toUpperCase() + dimension.slice(1);\n        const value = $element[dimensionFn]();\n\n        // Remove the property (needed for IE)\n        $element.each((i, e) => e.style.removeProperty(maxProperty));\n\n        // Set the new max restriction\n        $element.css(maxProperty, value);\n    });\n};\n","import { OHIF } from 'meteor/ohif:core';\n\n// Allow attaching to jQuery selectors\n$.fn.draggable = function(options) {\n    makeDraggable(this, options);\n    return this;\n};\n\n/**\n * This function makes an element movable around the page.\n * It supports mouse and touch input and allows whichever element\n * is specified to be moved to any arbitrary position.\n *\n * @param element\n */\nfunction makeDraggable(element, options={}) {\n    const $element = element;\n\n    // Force to hardware acceleration to move element if browser supports translate property\n    const { styleProperty } = OHIF.ui;\n    const useTransform = styleProperty.check('transform', 'translate(1px, 1px)');\n\n    const $container = $(options.container || window);\n    let diffX;\n    let diffY;\n    let wasNotDragged = true;\n    let dragging = false;\n\n    let lastCursor, lastOffset;\n    let lastTranslateX = 0;\n    let lastTranslateY = 0;\n\n    options.defaultElementCursor = options.defaultElementCursor || 'default';\n\n    // initialize dragged flag\n    $element.data('wasDragged', false);\n\n    function matrixToArray(str) {\n        return str.match(/(-?[0-9\\.]+)/g);\n    }\n\n    function getCursorCoords(e) {\n        const cursor = {\n            x: e.clientX,\n            y: e.clientY\n        };\n\n        // Handle touchMove cases\n        if (cursor.x === undefined) {\n            cursor.x = e.originalEvent.touches[0].pageX;\n        }\n\n        if (cursor.y === undefined) {\n            cursor.y = e.originalEvent.touches[0].pageY;\n        }\n\n        return cursor;\n    }\n\n    function reposition(elementLeft, elementTop) {\n        if (useTransform) {\n            const translation = `translate(${elementLeft}px, ${elementTop}px)`;\n            styleProperty.set($element[0], 'transform', translation);\n        } else {\n            $element.css({\n                left: elementLeft + 'px',\n                top: elementTop + 'px',\n                bottom: 'auto', // Setting these to empty doesn't seem to work in Firefox or Safari\n                right: 'auto'\n            });\n        }\n    }\n\n    function startMoving(e) {\n        // Prevent dragging dialog by clicking on slider\n        // (could be extended for buttons, not sure it's necessary\n        if (e.target.type && e.target.type === 'range') {\n            return;\n        }\n\n        // Stop the dragging if it's not the primary button\n        if (e.button !== 0) return;\n\n        // Stop the dragging if the element is being resized\n        if ($element.hasClass('resizing')) {\n            return;\n        }\n\n        let elementLeft = parseFloat($element.offset().left);\n        let elementTop = parseFloat($element.offset().top);\n\n        const cursor = getCursorCoords(e);\n        if (useTransform) {\n            lastCursor = cursor;\n            lastOffset = $element.offset();\n            const transformMatrix = matrixToArray($element.css('transform')) || [];\n            lastTranslateX = parseFloat(transformMatrix[4]) || 0;\n            lastTranslateY = parseFloat(transformMatrix[5]) || 0;\n            elementLeft = lastTranslateX;\n            elementTop = lastTranslateY;\n        } else {\n            diffX = cursor.x - elementLeft;\n            diffY = cursor.y - elementTop;\n        }\n\n        reposition(elementLeft, elementTop);\n\n        $(document).on('mousemove', moveHandler);\n        $(document).on('mouseup', stopMoving);\n\n        $(document).on('touchmove', moveHandler);\n        $(document).on('touchend', stopMoving);\n    }\n\n    function stopMoving() {\n        $container.css('cursor', 'default');\n        $element.css('cursor', options.defaultElementCursor);\n\n        if (dragging) {\n            setTimeout(() => $element.removeClass('dragging'));\n            dragging = false;\n        }\n\n        $(document).off('mousemove', moveHandler);\n        $(document).off('touchmove', moveHandler);\n    }\n\n    function moveHandler(e) {\n        if (!dragging) {\n            $container.css('cursor', 'move');\n            $element.css('cursor', 'move');\n            $element.addClass('dragging');\n            dragging = true;\n        }\n\n        // let outside world know that the element in question has been dragged\n        if (wasNotDragged) {\n            $element.data('wasDragged', true);\n            wasNotDragged = false;\n        }\n\n        // Prevent dialog box dragging whole page in iOS\n        e.preventDefault();\n\n        const elementWidth = parseFloat($element.outerWidth());\n        const elementHeight = parseFloat($element.outerHeight());\n        const containerWidth = parseFloat($container.width());\n        const containerHeight = parseFloat($container.height());\n\n        const cursor = getCursorCoords(e);\n\n        let elementLeft, elementTop;\n        if (useTransform) {\n            elementLeft = lastTranslateX - (lastCursor.x - cursor.x);\n            elementTop = lastTranslateY - (lastCursor.y - cursor.y);\n\n            const limitX = containerWidth - elementWidth;\n            const limitY = containerHeight - elementHeight;\n            const sumX = lastOffset.left + (elementLeft - lastTranslateX);\n            const sumY = lastOffset.top + (elementTop - lastTranslateY);\n\n            if (sumX > limitX) {\n                elementLeft -= sumX - limitX;\n            }\n\n            if (sumY > limitY) {\n                elementTop -= sumY - limitY;\n            }\n\n            if (sumX < 0) {\n                elementLeft += 0 - sumX;\n            }\n\n            if (sumY < 0) {\n                elementTop += 0 - sumY;\n            }\n        } else {\n            elementLeft = cursor.x - diffX;\n            elementTop = cursor.y - diffY;\n\n            elementLeft = Math.max(elementLeft, 0);\n            elementTop = Math.max(elementTop, 0);\n\n            if (elementLeft + elementWidth > containerWidth) {\n                elementLeft = containerWidth - elementWidth;\n            }\n\n            if (elementTop + elementHeight > containerHeight) {\n                elementTop = containerHeight - elementHeight;\n            }\n        }\n\n        reposition(elementLeft, elementTop);\n    }\n\n    $element.on('mousedown', startMoving);\n    $element.on('touchstart', startMoving);\n}\n","import { Tracker } from 'meteor/tracker';\nimport { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\nclass Dropdown {\n    constructor() {\n        this.observer = new Tracker.Dependency();\n        this._items = [];\n        this.observer.changed();\n    }\n\n    clearItems() {\n        this._items = [];\n        this.observer.changed();\n    }\n\n    setItems(items) {\n        this._items = items;\n        this.observer.changed();\n    }\n\n    addItem(item) {\n        this._items.push(item);\n        this.observer.changed();\n    }\n\n    removeItem(item) {\n        this._items = _.without(this._items, item);\n        this.observer.changed();\n    }\n\n    getItems() {\n        this.observer.depend();\n        return this._items;\n    }\n}\n\nOHIF.ui.Dropdown = Dropdown;\n","import { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\nimport { OHIF } from 'meteor/ohif:core';\n\nOHIF.ui.showDropdown = (items=[], options={}) => {\n    let promiseResolve;\n    let promiseReject;\n    const promise = new Promise((resolve, reject) => {\n        promiseResolve = resolve;\n        promiseReject = reject;\n    });\n\n    // Prepare the method to destroy the view\n    let view;\n    const destroyView = () => Blaze.remove(view);\n\n    // Create the data object that the dropdown will receive\n    const templateData = {\n        items,\n        options,\n        destroyView,\n        promise,\n        promiseResolve,\n        promiseReject\n    };\n\n    // Render the dialog with the given template and data\n    const parentElement = options.parentElement || document.body;\n    view = Blaze.renderWithData(Template.dropdownForm, templateData, parentElement);\n\n    // Create a handler to dismiss the dropdown on navigation\n    const $body = $(document.body);\n    const navigationHandler = () => {\n        promiseReject();\n        $body.off('ohif.navigated', navigationHandler);\n    };\n\n    // Dismiss the dropdown if navigation occurs\n    $body.on('ohif.navigated', navigationHandler);\n\n    // Return the promise to allow callbacks stacking from outside\n    return promise;\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\nimport { $ } from 'meteor/jquery';\nimport { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\nconst Notifications = {\n    currentId: 0,\n    views: new Map()\n};\n\n// Remove the view object from DOM and from views Map\nconst removeView = (id, view) => {\n    Notifications.views.delete(id);\n    Blaze.remove(view);\n};\n\n// Dismiss a single notification note by its id\nNotifications.dismiss = id => {\n    const view = Notifications.views.get(id);\n    if (!view || view.isDestroyed) {\n        return Notifications.views.delete(id);\n    }\n\n    const node = view.firstNode();\n    const $note = node && $(node);\n\n    if ($note.length) {\n        $note.addClass('out').one('transitionend', () => removeView(id, view));\n    } else {\n        removeView(id, view);\n    }\n};\n\n// Dismiss all notification notes\nNotifications.clear = () => Array.from(Notifications.views.keys()).forEach(Notifications.dismiss);\n\n// Display a notification note\nNotifications.show = ({ template, data, text, style, timeout=5000, promise }) => {\n    // Check if the given template exists\n    const templateObject = Template[template];\n    if (template && !templateObject) {\n        throw new Meteor.Error('TEMPLATE_NOT_FOUND', `Template ${template} not found.`);\n    }\n\n    // Check if there is a notification area container\n    const $area = $('#notificationArea');\n    if (!$area.length) {\n        throw new Meteor.Error('NOTIFICATION_AREA_NOT_FOUND', `Notification area not found.`);\n    }\n\n    let notificationPromise;\n    let templateData = {\n        template,\n        data,\n        text,\n        style,\n        timeout,\n        id: Notifications.currentId++\n    };\n\n    if (promise instanceof Promise) {\n        // Use the given promise to control the notification\n        notificationPromise = templateData.promise = promise;\n    } else {\n        // Create a new promise to control the modal and store its resolve and reject callbacks\n        let promiseResolve;\n        let promiseReject;\n        notificationPromise = new Promise((resolve, reject) => {\n            promiseResolve = resolve;\n            promiseReject = reject;\n        });\n\n        // Render the notification passing the promise object and callbacks\n        _.extend({}, templateData, {\n            promise: notificationPromise,\n            promiseResolve,\n            promiseReject\n        });\n    }\n\n    const view = Blaze.renderWithData(Template.notificationNote, templateData, $area[0]);\n    const dismissNotification = () => Notifications.dismiss(templateData.id);\n\n    // Add the current view to the list of views to allow clearing all notifications\n    Notifications.views.set(templateData.id, view);\n\n    // Destroy the created notification view when the promise is either resolved or rejected\n    notificationPromise.then(dismissNotification).catch(dismissNotification);\n\n    // Destroy the created notification view if the given timeout time has passed\n    if (timeout > 0) {\n        Meteor.setTimeout(() => {\n            if (templateData.promiseResolve) {\n                templateData.promiseResolve();\n            } else {\n                dismissNotification();\n            }\n        }, timeout);\n    }\n\n    // Return the promise to allow callbacks stacking from outside\n    return notificationPromise;\n};\n\nNotifications.info = o => Notifications.show(Object.assign({}, o, { style: 'info' }));\nNotifications.success = o => Notifications.show(Object.assign({}, o, { style: 'success' }));\nNotifications.warning = o => Notifications.show(Object.assign({}, o, { style: 'warning' }));\nNotifications.danger = o => Notifications.show(Object.assign({}, o, { style: 'danger' }));\n\nOHIF.ui.notifications = Notifications;\n","import { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\nimport { OHIF } from 'meteor/ohif:core';\n\nOHIF.ui.showPopover = (templateName, popoverData, options={}) => {\n    // Check if the given template exists\n    const template = Template[templateName];\n    if (!template) {\n        throw {\n            name: 'TEMPLATE_NOT_FOUND',\n            message: `Template ${templateName} not found.`\n        };\n    }\n\n    let promise;\n    let templateData;\n    if (popoverData && popoverData.promise instanceof Promise) {\n        // Use the given promise to control the modal\n        promise = popoverData.promise;\n        templateData = popoverData;\n    } else {\n        // Create a new promise to control the modal and store its resolve and reject callbacks\n        let promiseResolve;\n        let promiseReject;\n        promise = new Promise((resolve, reject) => {\n            promiseResolve = resolve;\n            promiseReject = reject;\n        });\n\n        // Render the dialog with the given template passing the promise object and callbacks\n        templateData = Object.assign({}, popoverData, {\n            promise,\n            promiseResolve,\n            promiseReject\n        });\n    }\n\n    const { element, event } = options;\n    const $element = $(element || event.currentTarget);\n\n    const defaults = {\n        content: '',\n        html: true,\n        trigger: 'manual',\n        placement: 'auto',\n        delay: {\n            show: 300,\n            hide: 300\n        }\n    };\n\n    const popoverOptions = Object.assign({} , defaults, options);\n    popoverOptions.content = Blaze.toHTMLWithData(template, popoverData);\n\n    $element.popover(popoverOptions);\n\n    $element.one('shown.bs.popover', function(event) {\n        const popoverId = $element.attr('aria-describedby');\n        const popover = document.getElementById(popoverId);\n        const $popover = $(popover);\n        const $popoverContent = $popover.find('.popover-content');\n        const dismissPopover = () => $element.popover('hide');\n\n        $popoverContent.html('');\n\n        const view = Blaze.renderWithData(template, templateData, $popoverContent[0]);\n        $element.one('hidden.bs.popover', () => {\n            Blaze.remove(view);\n            $element.popover('destroy');\n        });\n\n        promise.then(dismissPopover).catch(dismissPopover);\n    });\n\n    if (popoverOptions.trigger === 'manual') {\n        $element.popover('show');\n    }\n\n    return promise;\n};\n","import { _ } from 'meteor/underscore';\nimport { OHIF } from 'meteor/ohif:core';\n\n// Allow attaching to jQuery selectors\n$.fn.resizable = function(options) {\n    _.each(this, element => {\n        const resizableInstance = $(element).data('resizableInstance');\n        if (options === 'destroy' && resizableInstance) {\n            $(element).removeData('resizableInstance');\n            resizableInstance.destroy();\n        } else {\n            if (resizableInstance) {\n                resizableInstance.options(options);\n            } else {\n                $(element).data('resizableInstance', new Resizable(element, options));\n            }\n        }\n    });\n\n    return this;\n};\n\n/**\n * This class makes an element resizable.\n */\nclass Resizable {\n\n    constructor(element, options={}) {\n        this.element = element;\n        this.$element = $(element);\n        this.options(options);\n    }\n\n    options(options={}) {\n        const { boundSize, minWidth, minHeight } = options;\n        this.minWidth = minWidth || this.$element.width() || 16;\n        this.minHeight = minHeight || this.$element.height() || 16;\n        this.boundSize = boundSize || 8;\n\n        this.destroy();\n        this.init();\n    }\n\n    init() {\n        this.defineEventHandlers();\n\n        for (let x = -1; x <= 1; x++) {\n            for (let y = -1; y <= 1; y++) {\n                this.createBound(x, y);\n            }\n        }\n\n        this.$element.addClass('resizable');\n    }\n\n    destroy() {\n        // Remove the instance added classes\n        this.$element.removeClass('resizable resizing');\n\n        // Get the bound borders\n        const $bound = this.$element.find('resize-bound');\n\n        // Remove the bound borders\n        $bound.remove();\n\n        // Detach the event handlers\n        this.detachEventHandlers($bound);\n    }\n\n    defineEventHandlers() {\n        this.initResizeHandler = event => {\n            const $window = $(window);\n\n            this.width = this.initialWidth = this.$element.width();\n            this.height = this.initialHeight = this.$element.height();\n            this.startWidth = this.width;\n            this.startHeight = this.height;\n\n            this.posX = parseInt(this.$element.css('left'));\n            this.posY = parseInt(this.$element.css('top'));\n            this.startPosX = this.posX;\n            this.startPosY = this.posY;\n\n            this.startX = event.clientX;\n            this.startY = event.clientY;\n\n            this.$element.addClass('resizing');\n\n            $window.on('mousemove', event.data, this.resizeHandler);\n            $window.on('mouseup', event.data, this.endResizeHandler);\n        };\n\n        this.resizeHandler = event => {\n            const { xDirection, yDirection } = event.data;\n            let x, y;\n            x = event.clientX < 0 ? 0 : event.clientX;\n            x = x > window.innerWidth ? window.innerWidth : x;\n            y = event.clientY < 0 ? 0 : event.clientY;\n            y = y > window.innerHeight ? window.innerHeight : y;\n\n            const xDistance = (x - this.startX) * xDirection;\n            const yDistance = (y - this.startY) * yDirection;\n\n            const width = xDistance + this.startWidth;\n            const height = yDistance + this.startHeight;\n            this.width = width < this.minWidth ? this.minWidth : width;\n            this.height = height < this.minHeight ? this.minHeight : height;\n            this.$element.width(this.width);\n            this.$element.height(this.height);\n\n            if (xDirection < 0) {\n                this.posX = this.startPosX - xDistance;\n                if (width < this.minWidth) {\n                    this.posX = this.startPosX + (this.startWidth - this.minWidth);\n                }\n\n                this.$element.css('left', `${this.posX}px`);\n            }\n\n            if (yDirection < 0) {\n                this.posY = this.startPosY - yDistance;\n                if (height < this.minHeight) {\n                    this.posY = this.startPosY + (this.startHeight - this.minHeight);\n                }\n\n                this.$element.css('top', `${this.posY}px`);\n            }\n        };\n\n        this.endResizeHandler = event => {\n            const $window = $(window);\n\n            $window.off('mousemove', this.resizeHandler);\n            $window.off('mouseup', this.endResizeHandler);\n\n            this.$element.removeClass('resizing');\n\n            // Let the listeners know that this element was resized\n            this.$element.trigger('resize');\n        };\n    }\n\n    attachEventHandlers($bound, xDirection, yDirection) {\n        const eventData = {\n            xDirection,\n            yDirection\n        };\n        $bound.on('mousedown', eventData, this.initResizeHandler);\n    }\n\n    detachEventHandlers($bound) {\n        const $window = $(window);\n\n        $bound.off('mousedown', this.initResizeHandler);\n        $window.off('mousemove', this.resizeHandler);\n        $window.off('mouseup', this.endResizeHandler);\n    }\n\n    createBound(xDirection, yDirection) {\n        if (xDirection === 0 && xDirection === yDirection) {\n            return;\n        }\n\n        const $bound = $('<div class=\"resize-bound\"></div>');\n\n        $bound[0].onselectstart = () => false;\n\n        $bound.css('font-size', `${this.boundSize}px`);\n\n        const mapX = ['left', 'center', 'right'];\n        const mapY = ['top', 'middle', 'bottom'];\n        $bound.addClass('bound-' + mapX[xDirection + 1]);\n        $bound.addClass('bound-' + mapY[yDirection + 1]);\n\n        $bound.appendTo(this.$element);\n\n        this.attachEventHandlers($bound, xDirection, yDirection);\n    }\n\n}\n\nOHIF.ui.Resizable = Resizable;\n","import { Tracker } from 'meteor/tracker';\nimport { OHIF } from 'meteor/ohif:core';\nimport { _ } from 'meteor/underscore';\n\nconst FUNCTION = 'function';\nconst STRING = 'string';\nconst UNDEFINED = 'undefined';\nconst WILDCARD = '*'; // \"*\" is a special name which means \"all children\".\nconst SEPARATOR = '.';\n\n/**\n * Main Namespace Component Class\n */\n\nclass Node {\n\n    constructor() {\n        this.value = 0;\n        this.children = {};\n        this.handlers = {};\n    }\n\n    getPathComponents(path) {\n        return typeof path === STRING ? path.split(SEPARATOR) : null;\n    }\n\n    getNodeUpToIndex(path, index) {\n\n        let node = this;\n\n        for (let i = 0; i < index; ++i) {\n            let item = path[i];\n            if (node.children.hasOwnProperty(item)) {\n                node = node.children[item];\n            } else {\n                node = null;\n                break;\n            }\n        }\n\n        return node;\n\n    }\n\n    append(name, value) {\n\n        const children = this.children;\n        let node = null;\n\n        if (children.hasOwnProperty(name)) {\n            node = children[name];\n        } else if (typeof name === STRING && name !== WILDCARD) {\n            node = new Node();\n            children[name] = node;\n        }\n\n        if (node !== null) {\n            node.value += value > 0 ? parseInt(value) : 0;\n        }\n\n        return node;\n\n    }\n\n    probe(recursively) {\n\n        let value = this.value;\n\n        // Calculate entire tree value recursively?\n        if (recursively === true) {\n            const children = this.children;\n            for (let item in children) {\n                if (children.hasOwnProperty(item)) {\n                    value += children[item].probe(recursively);\n                }\n            }\n        }\n\n        return value;\n\n    }\n\n    clear(recursively) {\n\n        this.value = 0;\n\n        // Clear entire tree recursively?\n        if (recursively === true) {\n            const children = this.children;\n            for (let item in children) {\n                if (children.hasOwnProperty(item)) {\n                    children[item].clear(recursively);\n                }\n            }\n        }\n\n    }\n\n    appendPath(path, value) {\n\n        path = this.getPathComponents(path);\n\n        if (path !== null) {\n            const last = path.length - 1;\n            let node = this;\n            for (let i = 0; i < last; ++i) {\n                node = node.append(path[i], 0);\n                if (node === null) {\n                    return false;\n                }\n            }\n\n            return (node.append(path[last], value) !== null);\n        }\n\n        return false;\n\n    }\n\n    clearPath(path, recursively) {\n\n        path = this.getPathComponents(path);\n\n        if (path !== null) {\n            const last = path.length - 1;\n            let node = this.getNodeUpToIndex(path, last);\n            if (node !== null) {\n                let item = path[last];\n                if (item !== WILDCARD) {\n                    if (node.children.hasOwnProperty(item)) {\n                        node.children[item].clear(recursively);\n                        return true;\n                    }\n                } else {\n                    const children = node.children;\n                    for (item in children) {\n                        if (children.hasOwnProperty(item)) {\n                            children[item].clear(recursively);\n                        }\n                    }\n\n                    return true;\n                }\n            }\n        }\n\n        return false;\n\n    }\n\n    probePath(path, recursively) {\n\n        path = this.getPathComponents(path);\n\n        if (path !== null) {\n            const last = path.length - 1;\n            let node = this.getNodeUpToIndex(path, last);\n            if (node !== null) {\n                let item = path[last];\n                if (item !== WILDCARD) {\n                    if (node.children.hasOwnProperty(item)) {\n                        return node.children[item].probe(recursively);\n                    }\n                } else {\n                    const children = node.children;\n                    let value = 0;\n                    for (item in children) {\n                        if (children.hasOwnProperty(item)) {\n                            value += children[item].probe(recursively);\n                        }\n                    }\n\n                    return value;\n                }\n            }\n        }\n\n        return 0;\n\n    }\n\n    attachHandler(type, handler) {\n\n        let result = false;\n\n        if (typeof type === STRING && typeof handler === FUNCTION) {\n\n            const handlers = this.handlers;\n            const list = handlers.hasOwnProperty(type) ? handlers[type] : (handlers[type] = []);\n            const length = list.length;\n\n            let notFound = true;\n\n            for (let i = 0; i < length; ++i) {\n                if (handler === list[i]) {\n                    notFound = false;\n                    break;\n                }\n            }\n\n            if (notFound) {\n                list[length] = handler;\n                result = true;\n            }\n\n        }\n\n        return result;\n\n    }\n\n    removeHandler(type, handler) {\n\n        let result = false;\n\n        if (typeof type === STRING && typeof handler === FUNCTION) {\n\n            const handlers = this.handlers;\n            if (handlers.hasOwnProperty(type)) {\n                const list = handlers[type];\n                const length = list.length;\n                for (let i = 0; i < length; ++i) {\n                    if (handler === list[i]) {\n                        list.splice(i, 1);\n                        result = true;\n                        break;\n                    }\n                }\n            }\n\n        }\n\n        return result;\n\n    }\n\n    trigger(type, nonRecursively) {\n\n        if (typeof type === STRING) {\n\n            const handlers = this.handlers;\n\n            if (handlers.hasOwnProperty(type)) {\n                const list = handlers[type];\n                const length = list.length;\n                for (let i = 0; i < length; ++i) {\n                    list[i].call(null);\n                }\n            }\n\n            if (nonRecursively !== true) {\n                const children = this.children;\n                for (let item in children) {\n                    if (children.hasOwnProperty(item)) {\n                        children[item].trigger(type);\n                    }\n                }\n            }\n\n        }\n\n    }\n\n    attachHandlerForPath(path, type, handler) {\n\n        path = this.getPathComponents(path);\n\n        if (path !== null) {\n            let node = this.getNodeUpToIndex(path, path.length);\n            if (node !== null) {\n                return node.attachHandler(type, handler);\n            }\n        }\n\n        return false;\n\n    }\n\n    removeHandlerForPath(path, type, handler) {\n\n        path = this.getPathComponents(path);\n\n        if (path !== null) {\n            let node = this.getNodeUpToIndex(path, path.length);\n            if (node !== null) {\n                return node.removeHandler(type, handler);\n            }\n        }\n\n        return false;\n\n    }\n\n    triggerHandlersForPath(path, type, nonRecursively) {\n\n        path = this.getPathComponents(path);\n\n        if (path !== null) {\n            let node = this.getNodeUpToIndex(path, path.length);\n            if (node !== null) {\n                node.trigger(type, nonRecursively);\n            }\n        }\n\n    }\n\n}\n\n/**\n * Root Namespace Node and API\n */\n\nconst rootNode = new Node();\n\nexport const unsavedChanges = {\n\n    rootNode: rootNode,\n\n    observer: new Tracker.Dependency(),\n\n    hooks: new Map(),\n\n    /**\n     * Register a reactive dependency on every change any path suffers\n     */\n    depend: function() {\n        return this.observer.depend();\n    },\n\n    /**\n     * Signal an unsaved change for a given namespace.\n     * @param {String} path A string (e.g., \"viewer.studyViewer.measurements.targets\") that identifies the namespace of the signaled changes.\n     * @return {Boolean} Returns false if the signal could not be saved or the supplied namespace is invalid. Otherwise, true is returned.\n     */\n    set: function(path) {\n        const result = rootNode.appendPath(path, 1);\n        this.observer.changed();\n        return result;\n    },\n\n    /**\n     * Clear all signaled unsaved changes for a given namespace. If the supplied namespace is a wildcard, all signals below that namespace\n     * are cleared.\n     * @param {String} path A string that identifies the namespace of the signaled changes (e.g., \"viewer.studyViewer.measurements.targets\"\n     *  for clearing the \"targets\" item of the \"viewer.studyViewer.measurements\" namespace or \"viewer.studyViewer.*\" to specify all signaled\n     *  changes for the \"viewer.studyViewer\" namespace).\n     * @param {Boolean} recursively Clear node and all its children recursively. If not specified defaults to true.\n     * @return {Boolean} Returns false if the signal could not be removed or the supplied namespace is invalid. Otherwise, true is returned.\n     */\n    clear: function(path, recursively) {\n        const result = rootNode.clearPath(path, typeof recursively === UNDEFINED ? true : recursively);\n        this.observer.changed();\n        return result;\n    },\n\n    /**\n     * Count the amount of signaled unsaved changes for a given namespace. If the supplied namespace is a wildcard, all signals below that\n     * namespace will also be accounted.\n     * @param {String} path A string that identifies the namespace of the signaled changes (e.g., \"viewer.studyViewer.measurements.targets\"\n     *  for counting the amount of signals for the \"targets\" item of the \"viewer.studyViewer.measurements\" namespace or \"viewer.studyViewer.*\"\n     *  to count all signaled changes for the \"viewer.studyViewer\" namespace).\n     * @param {Boolean} recursively Probe node and all its children recursively. If not specified defaults to true.\n     * @return {Number} Returns the amount of signaled changes for a given namespace. If the supplied namespace is a wildcard, the sum of all\n     *  changes for that namespace are returned.\n     */\n    probe: function(path, recursively) {\n        return rootNode.probePath(path, typeof recursively === UNDEFINED ? true : recursively);\n    },\n\n    /**\n     * Attach an event handler to the specified namespace.\n     * @param {String} name A string that identifies the namespace to which the event handler will be attached (e.g.,\n     *  \"viewer.studyViewer.measurements\" to attach an event handler for that namespace).\n     * @param {String} type A string that identifies the event type to which the event handler will be attached.\n     * @param {Function} handler The handler that will be executed when the specifed event is triggered.\n     * @return {Boolean} Returns true on success and false on failure.\n     */\n    attachHandler: function(path, type, handler) {\n        return (rootNode.appendPath(path, 0) && rootNode.attachHandlerForPath(path, type, handler));\n    },\n\n    /**\n     * Detach an event handler from the specified namespace.\n     * @param {String} name A string that identifies the namespace from which the event handler will be detached (e.g.,\n     *  \"viewer.studyViewer.measurements\" to remove an event handler from that namespace).\n     * @param {String} type A string that identifies the event type to which the event handler was attached.\n     * @param {Function} handler The handler that will be removed from execution list.\n     * @return {Boolean} Returns true on success and false on failure.\n     */\n    removeHandler: function(path, type, handler) {\n        return rootNode.removeHandlerForPath(path, type, handler);\n    },\n\n    /**\n     * Trigger all event handlers for the specified namespace and type.\n     * @param {String} name A string that identifies the namespace from which the event handler will be detached (e.g.,\n     *  \"viewer.studyViewer.measurements\" to remove an event handler from that namespace).\n     * @param {String} type A string that identifies the event type which will be triggered.\n     * @param {Boolean} nonRecursively If set to true, prevents triggering event handlers from descending tree.\n     * @return {Void} No value is returned.\n     */\n    trigger: function(path, type, nonRecursively) {\n        rootNode.triggerHandlersForPath(path, type, nonRecursively);\n    },\n\n    /**\n     * UI utility that presents a confirmation dialog to the user if any unsaved changes where signaled for the given namespace.\n     * @param {String} path A string that identifies the namespace of the signaled changes (e.g., \"viewer.studyViewer.measurements.targets\"\n     *  for considering only the signals for the \"targets\" item of the \"viewer.studyViewer.measurements\" namespace or \"viewer.studyViewer.*\"\n     *  to consider all signaled changes for the \"viewer.studyViewer\" namespace).\n     * @param {Function} callback A callback function (e.g, function(shouldProceed, hasChanges) { ... }) that will be executed after assessment.\n     *  Upon execution, the callback will receive two boolean arguments (shouldProceed and hasChanges) indicating if the action can be performed\n     *  or not and if changes that need to be cleared exist.\n     * @param {Object} options (Optional) An object with UI presentation options.\n     * @param {String} options.title The string that will be used as a title for confirmation dialog.\n     * @param {String} options.message The string that will be used as a message for confirmation dialog.\n     * @return {void} No value is returned.\n     */\n    checkBeforeAction: function(path, callback, options) {\n\n        let probe, hasChanges, shouldProceed;\n\n        if (typeof callback !== 'function') {\n            // nothing to do if no callback function is supplied...\n            return;\n        }\n\n        probe = this.probe(path);\n        if (probe > 0) {\n            // Unsaved changes exist...\n            hasChanges = true;\n            let dialogOptions = _.extend({\n                title: 'You have unsaved changes!',\n                message: \"Your changes will be lost if you don't save them before leaving the current page... Are you sure you want to proceed?\"\n            }, options);\n            OHIF.ui.showDialog('dialogConfirm', dialogOptions).then(function() {\n                // Unsaved changes exist but user confirms action...\n                shouldProceed = true;\n                callback.call(null, shouldProceed, hasChanges);\n            }, function() {\n                // Unsaved changes exist and user does NOT confirm action...\n                shouldProceed = false;\n                callback.call(null, shouldProceed, hasChanges);\n            });\n        } else {\n            // No unsaved changes, action can be performed...\n            hasChanges = false;\n            shouldProceed = true;\n            callback.call(null, shouldProceed, hasChanges);\n        }\n\n    },\n\n    /**\n     * UI utility that presents a \"proactive\" dialog (with three options: stay, abandon-changes, save-changes) to the user if any unsaved changes where signaled for the given namespace.\n     * @param {String} path A string that identifies the namespace of the signaled changes (e.g., \"viewer.studyViewer.measurements.targets\"\n     *  for considering only the signals for the \"targets\" item of the \"viewer.studyViewer.measurements\" namespace or \"viewer.studyViewer.*\"\n     *  to consider all signaled changes for the \"viewer.studyViewer\" namespace).\n     * @param {Function} callback A callback function (e.g, function(hasChanges, userChoice) { ... }) that will be executed after assessment.\n     *  Upon execution, the callback will receive two arguments: one boolean (hasChanges) indicating that unsaved changes exist and one string with the ID of the\n     *  option picked by the user on the dialog ('abort-action', 'abandon-changes' and 'save-changes'). If no unsaved changes exist, the second argument is null.\n     * @param {Object} options (Optional) An object with UI presentation options.\n     * @param {Object} options.position An object with optimal position (e.g., { x: ..., y: ... }) for the dialog.\n     * @return {void} No value is returned.\n     */\n    presentProactiveDialog: function(path, callback, options) {\n\n        let probe, hasChanges;\n\n        if (typeof callback !== 'function') {\n            // nothing to do if no callback function is supplied...\n            return;\n        }\n\n        probe = this.probe(path, true);\n        if (probe > 0) {\n            // Unsaved changes exist...\n            hasChanges = true;\n            OHIF.ui.unsavedChangesDialog(function(choice) {\n                callback.call(null, hasChanges, choice);\n            }, options);\n        } else {\n            // No unsaved changes, action can be performed...\n            hasChanges = false;\n            callback.call(null, hasChanges, null);\n        }\n\n    },\n\n    addHook(saveCallback, options={}) {\n        _.defaults(options, {\n            path: '*',\n            message: 'There are unsaved changes'\n        });\n\n        this.hooks.set(saveCallback, options);\n    },\n\n    removeHook(saveCallback) {\n        this.hooks.delete(saveCallback);\n    },\n\n    confirmNavigation(navigateCallback, event) {\n        let dialogPresented = false;\n        Array.from(this.hooks.keys()).every(saveCallback => {\n            const options = this.hooks.get(saveCallback);\n            const probe = this.probe(options.path, true);\n            if (!probe) return true;\n\n            const dialogOptions = Object.assign({ class: 'themed' }, options);\n            if (event) {\n                dialogOptions.position = {\n                    x: event.clientX + 15,\n                    y: event.clientY + 15\n                };\n            }\n\n            OHIF.ui.unsavedChanges.presentProactiveDialog(options.path, (hasChanges, userChoice) => {\n                if (!hasChanges) return;\n\n                const clear = () => this.clear(options.path, true);\n                switch (userChoice) {\n                    case 'abort-action':\n                        return;\n                    case 'save-changes':\n                        const result = saveCallback();\n                        if (result instanceof Promise) {\n                            return result.then(() => {\n                                clear();\n                                this.confirmNavigation(navigateCallback, event);\n                            });\n                        }\n\n                        clear();\n                        return this.confirmNavigation(navigateCallback, event);\n                    case 'abandon-changes':\n                        clear();\n                        break;\n                }\n\n                navigateCallback();\n            }, dialogOptions);\n\n            dialogPresented = true;\n            return false;\n        });\n\n        if (!dialogPresented) {\n            navigateCallback();\n        }\n    }\n\n};\n\nOHIF.ui.unsavedChanges = unsavedChanges;\n","import './lib';\nimport './utils';\n\nimport './schema.js';\n","import { SimpleSchema } from 'meteor/aldeed:simple-schema';\n\n/*\n Extend the available options on schema definitions:\n\n  * valuesLabels: Used in conjunction with allowedValues to define the text\n    label for each value (used on forms)\n\n  * textOptional: Used to allow empty strings\n\n */\nSimpleSchema.extendOptions({\n    valuesLabels: Match.Optional([String]),\n    textOptional: Match.Optional(Boolean)\n});\n\n// Add default required validation for empty strings which can be bypassed\n// using textOptional=true definition\nSimpleSchema.addValidator(function() {\n    if (\n        this.definition.optional !== true &&\n        this.definition.textOptional !== true &&\n        this.value === ''\n    ) {\n        return 'required';\n    }\n});\n\n// Including [label] for some messages\nSimpleSchema.messages({\n    maxCount: '[label] can not have more than [maxCount] values',\n    minCount: '[label] must have at least [minCount] values',\n    notAllowed: '[label] has an invalid value: \"[value]\"'\n});\n","import './object.js';\n","import { OHIF } from 'meteor/ohif:core';\n\nOHIF.object = {};\n\n// Transforms a shallow object with keys separated by \".\" into a nested object\nOHIF.object.getNestedObject = shallowObject => {\n    const nestedObject = {};\n    for (let key in shallowObject) {\n        if (!shallowObject.hasOwnProperty(key)) continue;\n        const value = shallowObject[key];\n        const propertyArray = key.split('.');\n        let currentObject = nestedObject;\n        while (propertyArray.length) {\n            const currentProperty = propertyArray.shift();\n            if (!propertyArray.length) {\n                currentObject[currentProperty] = value;\n            } else {\n                if (!currentObject[currentProperty]) {\n                    currentObject[currentProperty] = {};\n                }\n\n                currentObject = currentObject[currentProperty];\n            }\n        }\n    }\n\n    return nestedObject;\n};\n\n// Transforms a nested object into a shallowObject merging its keys with \".\" character\nOHIF.object.getShallowObject = nestedObject => {\n    const shallowObject = {};\n    const putValues = (baseKey, nestedObject, resultObject) => {\n        for (let key in nestedObject) {\n            if (!nestedObject.hasOwnProperty(key)) continue;\n            let currentKey = baseKey ? `${baseKey}.${key}` : key;\n            const currentValue = nestedObject[key];\n            if (typeof currentValue === 'object') {\n                if (currentValue instanceof Array) {\n                    currentKey += '[]';\n                }\n\n                putValues(currentKey, currentValue, resultObject);\n            } else {\n                resultObject[currentKey] = currentValue;\n            }\n        }\n    };\n\n    putValues('', nestedObject, shallowObject);\n    return shallowObject;\n};\n","import { OHIF } from 'meteor/ohif:core';\n\n// Return an absolute URL with the page domain using sub path of ROOT_URL\n// to let multiple domains directed to the same server work\nOHIF.utils.absoluteUrl = function(path) {\n    let absolutePath = '/';\n\n    const absoluteUrl = Meteor.absoluteUrl();\n    const absoluteUrlParts = absoluteUrl.split('/');\n\n    if (absoluteUrlParts.length > 4) {\n        const rootUrlPrefixIndex = absoluteUrl.indexOf(absoluteUrlParts[3]);\n        absolutePath += absoluteUrl.substring(rootUrlPrefixIndex) + path;\n    } else {\n        absolutePath += path;\n    }\n\n    return absolutePath.replace(/\\/\\/+/g, '/');\n};","import './absoluteUrl';\nimport './objectPath';\n","import { OHIF } from 'meteor/ohif:core';\n\nclass ObjectPath {\n\n    /**\n     * Set an object property based on \"path\" (namespace) supplied creating\n     * ... intermediary objects if they do not exist.\n     * @param object {Object} An object where the properties specified on path should be set.\n     * @param path {String} A string representing the property to be set, e.g. \"user.study.series.timepoint\".\n     * @param value {Any} The value of the property that will be set.\n     * @return {Boolean} Returns \"true\" on success, \"false\" if any intermediate component of the supplied path\n     * ... is not a valid Object, in which case the property cannot be set. No excpetions are thrown.\n     */\n    static set(object, path, value) {\n\n        let components = ObjectPath.getPathComponents(path),\n            length = components !== null ? components.length : 0,\n            result = false;\n\n        if (length > 0 && ObjectPath.isValidObject(object)) {\n\n            let i = 0,\n                last = length - 1,\n                currentObject = object;\n\n            while (i < last) {\n\n                let field = components[i];\n\n                if (field in currentObject) {\n                    if (!ObjectPath.isValidObject(currentObject[field])) {\n                        break;\n                    }\n                } else {\n                    currentObject[field] = {};\n                }\n\n                currentObject = currentObject[field];\n                i++;\n\n            }\n\n            if (i === last) {\n                currentObject[components[last]] = value;\n                result = true;\n            }\n\n        }\n\n        return result;\n\n    }\n\n    /**\n     * Get an object property based on \"path\" (namespace) supplied traversing the object\n     * ... tree as necessary.\n     * @param object {Object} An object where the properties specified might exist.\n     * @param path {String} A string representing the property to be searched for, e.g. \"user.study.series.timepoint\".\n     * @return {Any} The value of the property if found. By default, returns the special type \"undefined\".\n     */\n    static get(object, path) {\n\n        let found, // undefined by default\n            components = ObjectPath.getPathComponents(path),\n            length = components !== null ? components.length : 0;\n\n        if (length > 0 && ObjectPath.isValidObject(object)) {\n\n            let i = 0,\n                last = length - 1,\n                currentObject = object;\n\n            while (i < last) {\n\n                let field = components[i];\n\n                const isValid = ObjectPath.isValidObject(currentObject[field]);\n                if (field in currentObject && isValid) {\n                    currentObject = currentObject[field];\n                    i++;\n                } else {\n                    break;\n                }\n\n            }\n\n            if (i === last && components[last] in currentObject) {\n                found = currentObject[components[last]];\n            }\n\n        }\n\n        return found;\n\n    }\n\n    /**\n     * Check if the supplied argument is a real JavaScript Object instance.\n     * @param object {Any} The subject to be tested.\n     * @return {Boolean} Returns \"true\" if the object is a real Object instance and \"false\" otherwise.\n     */\n    static isValidObject(object) {\n        return (\n            typeof object === 'object' &&\n            object !== null &&\n            object instanceof Object\n        );\n    }\n\n    static getPathComponents(path) {\n        return (typeof path === 'string' ? path.split('.') : null);\n    }\n\n}\n\nOHIF.utils.ObjectPath = ObjectPath;\n"]}