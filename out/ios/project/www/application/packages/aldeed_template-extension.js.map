)]}'
{"version":3,"sources":["meteor://ðŸ’»app/packages/aldeed:template-extension/lib/hooks.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-for-each.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-hooks.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-global-hooks.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-for-each-instance.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-inherits-events-from.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-inherits-helpers-from.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-inherits-hooks-from.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-register-helpers.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-replaces.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-clear-event-maps.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-copy-as.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-instance-parent.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-instance-get.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-instance-set.js","meteor://ðŸ’»app/packages/aldeed:template-extension/lib/template-parent-data-function.js"],"names":["Hooks","global","created","rendered","destroyed","master","runGlobal","arguments","addGlobal","template","_hasTemplateExtensionMasterHooks","onCreated","onRendered","onDestroyed","type","args","hook","apply","Template","forEach","callback","alreadyDidBody","t","hasOwnProperty","tmpl","Blaze","isTemplate","name","viewName","prototype","hooks","Error","Meteor","startup","push","_renderedInstances","i","indexOf","splice","forEachCurrentlyRenderedInstance","func","inheritsEventsFrom","otherTemplate","self","__eventMaps","inheritEvents","concat","Array","isArray","inheritsHelpersFrom","inheritHelpers","inheritedHelpers","__helpers","charAt","slice","helpers","inheritsHooksFrom","inheritHooks","_callbacks","registerHelpers","registerHelper","replaces","replaceRender","renderFunction","clearEventMaps","copyAs","newTemplateName","createNewTemplate","templateName","newTemplate","result","TemplateInstance","parent","selector","includeBlockHelpers","isFinite","height","parentByHeight","call","Number","MAX_VALUE","view","parentView","templateInstance","originalParentView","get","fieldName","set","value","previousValue","Package","ReactiveVar","originalParentData","_parentData","_functionWrapped","theWith","getView","test","dataVar","Tracker","nonreactive","parentData"],"mappings":"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","file":"/packages/aldeed_template-extension.js","sourcesContent":["Hooks = {\n  global: {\n    created: [],\n    rendered: [],\n    destroyed: []\n  },\n  master: {\n    created: function () {\n      Hooks.runGlobal('created', this, arguments);\n    },\n    rendered: function () {\n      Hooks.runGlobal('rendered', this, arguments);\n    },\n    destroyed: function () {\n      Hooks.runGlobal('destroyed', this, arguments);\n    }\n  }\n};\n\nHooks.addGlobal = (template) => {\n  // For each hookType, define the hooks for this template.\n  // Since we might call this multiple times from startup code\n  // and other functions, make sure we do it only once.\n  // Doing it twice would create an infinite loop of self-calling\n  // hooks.\n  if (!template._hasTemplateExtensionMasterHooks) {\n    template.onCreated(Hooks.master.created);\n    template.onRendered(Hooks.master.rendered);\n    template.onDestroyed(Hooks.master.destroyed);\n\n    template._hasTemplateExtensionMasterHooks = true;\n  }\n};\n\nHooks.runGlobal = (type, template, args) => {\n  for (let hook of Hooks.global[type]) {\n    hook.apply(template, args);\n  }\n};\n","Template.forEach = (callback) => {\n  // for some reason we get the \"body\" template twice when looping, so\n  // we track that and only call the callback once.\n  var alreadyDidBody = false;\n  for (var t in Template) {\n    if (Template.hasOwnProperty(t)) {\n      var tmpl = Template[t];\n      if (Blaze.isTemplate(tmpl)) {\n        let name = tmpl.viewName;\n        if (name === 'body') {\n          if (!alreadyDidBody) {\n            alreadyDidBody = true;\n            callback(tmpl);\n          }\n        } else if (name !== 'Template.__dynamic' && name !== 'Template.__dynamicWithDataContext') {\n          callback(tmpl);\n        }\n      }\n    }\n  }\n};\n","Template.prototype.hooks = function (hooks) {\n  if (!hooks || typeof hooks !== 'object') {\n    throw new Error('hooks argument must be an object with created, rendered, and/or destroyed properties, each set to a function');\n  }\n\n  if (typeof hooks.created === 'function') this.onCreated(hooks.created);\n  if (typeof hooks.rendered === 'function') this.onRendered(hooks.rendered);\n  if (typeof hooks.destroyed === 'function') this.onDestroyed(hooks.destroyed);\n};\n","// Setup for multiple hooks support\n// We assume that no other code will be directly defining\n// a hook once the client has started.\nMeteor.startup(() => {\n  Template.forEach((template) => {\n    Hooks.addGlobal(template);\n  });\n});\n\nTemplate.onCreated = (hook) => {\n  Hooks.global.created.push(hook);\n};\n\nTemplate.onRendered = (hook) => {\n  Hooks.global.rendered.push(hook);\n};\n\nTemplate.onDestroyed = (hook) => {\n  Hooks.global.destroyed.push(hook);\n};\n","Template._renderedInstances = [];\n\nTemplate.onRendered(function onRendered() {\n  Template._renderedInstances.push(this);\n});\n\nTemplate.onDestroyed(function onDestroyed() {\n  var i = Template._renderedInstances.indexOf(this);\n  if (i > -1) Template._renderedInstances.splice(i, 1);\n});\n\nTemplate.forEachCurrentlyRenderedInstance = (func) => {\n  Template._renderedInstances.forEach(func);\n};\n","Template.prototype.inheritsEventsFrom = function inheritsEventsFrom(otherTemplate) {\n  var self = this;\n\n  self.__eventMaps = self.__eventMaps || [];\n\n  function inheritEvents(template) {\n    // String template names can be provided and template object is looked up\n    if (typeof template === 'string') template = Template[template];\n    if (!template) return;\n\n    self.__eventMaps = self.__eventMaps.concat(template.__eventMaps);\n  }\n\n  // Accept an array as otherTemplate argument\n  if (Array.isArray(otherTemplate)) {\n    otherTemplate.forEach(inheritEvents);\n    return;\n  }\n\n  // otherTemplate is a string\n  inheritEvents(otherTemplate);\n};\n","Template.prototype.inheritsHelpersFrom = function inheritsHelpersFrom(otherTemplate) {\n  const inheritHelpers = template => {\n    // String template names can be provided and template object is looked up\n    if (typeof template === 'string') template = Template[template];\n    if (!template) return;\n\n    const inheritedHelpers = {};\n    for (const name in template.__helpers) {\n      if (template.__helpers.hasOwnProperty(name)) {\n        if (name.charAt(0) === ' ') {\n          inheritedHelpers[name.slice(1)] = template.__helpers[name];\n        }\n      }\n    }\n\n    this.helpers(inheritedHelpers);\n  };\n\n  // Accept an array as otherTemplate argument\n  if (Array.isArray(otherTemplate)) {\n    otherTemplate.forEach(inheritHelpers);\n    return;\n  }\n\n  // otherTemplate is a string\n  inheritHelpers(otherTemplate);\n};\n","Template.prototype.inheritsHooksFrom = function inheritsHooksFrom(otherTemplate) {\n  var self = this;\n\n  function inheritHooks(template) {\n    // String template names can be provided and template object is looked up\n    if (typeof template === 'string') template = Template[template];\n    if (!template) return;\n\n    // For this to work properly, need to ensure that we've defined\n    // the global hook hook for the other template already.\n    Hooks.addGlobal(template);\n\n    for (let hook of template._callbacks.created) {\n      // Don't copy the master hook because every template already has it\n      if (hook === Hooks.master.created) continue;\n      self.onCreated(hook);\n    }\n\n    for (let hook of template._callbacks.rendered) {\n      // Don't copy the master hook because every template already has it\n      if (hook === Hooks.master.rendered) continue;\n      self.onRendered(hook);\n    }\n\n    for (let hook of template._callbacks.destroyed) {\n      // Don't copy the master hook because every template already has it\n      if (hook === Hooks.master.destroyed) continue;\n      self.onDestroyed(hook);\n    }\n  }\n\n  // Accept an array as otherTemplate argument\n  if (Array.isArray(otherTemplate)) {\n    otherTemplate.forEach(inheritHooks);\n    return;\n  }\n\n  // otherTemplate is a string\n  inheritHooks(otherTemplate);\n};\n","Template.registerHelpers = (helpers) => {\n  if (!helpers) return;\n\n  for (let name in helpers) {\n    if (helpers.hasOwnProperty(name)) {\n      Template.registerHelper(name, helpers[name]);\n    }\n  }\n};\n","Template.prototype.replaces = function replaces(otherTemplate) {\n  var self = this;\n\n  function replaceRender(template) {\n    // String template names can be provided and template object is looked up\n    if (typeof template === 'string') template = Template[template];\n    if (!template) return;\n\n    template.renderFunction = self.renderFunction;\n  }\n\n  // Accept an array as otherTemplate argument\n  if (Array.isArray(otherTemplate)) {\n    otherTemplate.forEach(replaceRender);\n    return;\n  }\n\n  replaceRender(otherTemplate);\n};\n","Template.prototype.clearEventMaps = function clearEventMaps() {\n  this.__eventMaps = [];\n};\n","Template.prototype.copyAs = function copyAs(newTemplateName) {\n  var self = this;\n\n  function createNewTemplate(templateName) {\n    var newTemplate =\n    Template[templateName] = new Template(`Template.${templateName}`, self.renderFunction);\n\n    newTemplate.inheritsHelpersFrom(self);\n    newTemplate.inheritsEventsFrom(self);\n    newTemplate.inheritsHooksFrom(self);\n\n    return newTemplate;\n  }\n\n  // Check if newTemplateName is an array\n  if (Array.isArray(newTemplateName)) {\n    const result = [];\n    for (let name of newTemplateName) {\n      result.push(createNewTemplate(name));\n    }\n    return result;\n  }\n\n  // newTemplateName is a string\n  return createNewTemplate(newTemplateName);\n};\n","/**\n * @param selector Can be a height or a function.\n *        Height. The number of levels beyond the current template instance to look.\n *        Defaults to 0.\n *\n *        Function that is given a template as we traverse up the template true. It is passed the template\n *        currently being traversed. If it returns true, then that template is returned, otherwise next is used. This\n *        is done till we hit a template with no parent, in which case null is returned.\n * @param includeBlockHelpers True to include block helpers.\n * @returns {*}\n */\nBlaze.TemplateInstance.prototype.parent = function parent(selector, includeBlockHelpers) {\n  let template = null;\n  if (isFinite(selector) || !selector) {\n    // If height is null, undefined, or 0, we default to 1, the first parent.\n    const height = !selector ? 1 : selector;\n    template = parentByHeight.call(this, height, includeBlockHelpers);\n  } else if (typeof selector === 'function') {\n    template = parentByHeight.call(this, Number.MAX_VALUE, includeBlockHelpers, selector);\n  } else {\n    throw 'template:children Template.parent() is given an invalid selector type.';\n  }\n\n  return template;\n};\n\n// Access parent template instance. \"height\" is the number of levels beyond the\n// current template instance to look. By default block helper template instances\n// are skipped, but if \"includeBlockHelpers\" is set to true, they are not.\n// See https://github.com/meteor/meteor/issues/3071\nfunction parentByHeight(height, includeBlockHelpers, selector) {\n  var i = 0;\n  var template = this;\n  while (i < height && template) {\n    var view = parentView(template.view, includeBlockHelpers);\n    // We skip contentBlock views which are injected by Meteor when using\n    // block helpers (in addition to block helper view). This matches more\n    // the visual structure of templates and not the internal implementation.\n    while (view && (!view.template || view.name === '(contentBlock)' || view.name === '(elseBlock)')) {\n      view = parentView(view, includeBlockHelpers);\n    }\n    if (!view) return null;\n\n    // Body view has template field, but not templateInstance,\n    // which more or less signals that we reached the top.\n    template = typeof view.templateInstance === 'function' ? view.templateInstance() : null;\n\n    if (!!selector && !!selector(template)) { return template; }\n\n    i++;\n  }\n  return template;\n}\n\nfunction parentView(view, includeBlockHelpers) {\n  if (includeBlockHelpers) return view.originalParentView || view.parentView;\n  return view.parentView;\n}\n\n","// Allow easy access to a template instance field when you do not know exactly\n// on which instance (this, or parent, or parent's parent, ...) a field is defined.\n// This allows easy restructuring of templates in HTML, moving things to included\n// templates without having to change everywhere in the code instance levels.\n// It also allows different structures of templates, when once template is included\n// at one level, and some other time at another. Levels do not matter anymore, just\n// that the field exists somewhere.\nBlaze.TemplateInstance.prototype.get = function get(fieldName) {\n  var template = this;\n\n  while (template) {\n    if (fieldName in template) return template[fieldName];\n    template = template.parent(1, true);\n  }\n};\n","// Allow easy setting of template instance's parent (or ancestor) field\n\nBlaze.TemplateInstance.prototype.set = function set(fieldName, value) {\n  var template = this;\n\n  while (template) {\n    if (fieldName in template) {\n      var previousValue = template[fieldName];\n      if (Package['reactive-var'] && previousValue instanceof Package['reactive-var'].ReactiveVar) {\n        template[fieldName].set(value);\n      } else {\n        template[fieldName] = value;\n      }\n      return previousValue;\n    }\n    template = template.parent(1, true);\n  }\n};\n","// Allow to specify a function to test parent data for at various\n// levels, instead of specifying a fixed number of levels to traverse.\nvar originalParentData = Blaze._parentData;\nBlaze._parentData = function (height, _functionWrapped) {\n  // If height is not a function, simply call original implementation.\n  if (typeof height !== 'function') return originalParentData(height, _functionWrapped);\n\n  var theWith = Blaze.getView('with');\n  var test = () => { return height(theWith.dataVar.get()); };\n  while (theWith) {\n    if (Tracker.nonreactive(test)) break;\n    theWith = Blaze.getView(theWith, 'with');\n  }\n\n  // _functionWrapped is internal and will not be\n  // specified with non numeric height, so we ignore it.\n  if (!theWith) return null;\n  // This registers a Tracker dependency.\n  return theWith.dataVar.get();\n};\n\nTemplate.parentData = Blaze._parentData;\n"]}